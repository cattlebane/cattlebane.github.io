function UIComponent(e){function t(){return window.getComputedStyle(i,null).getPropertyValue("transform").replace(/[\s\(\)matrix]/g,"").split(",")}var a=!0,n=!1,i=document.createElement("div");return e=e||{},e.id&&(i.id=e.id),Styles.setCss(i,e.css),e.target&&e.target.appendChild(i),Object.defineProperty(i,"x",{get:function(){return+t()[4]},set:function(e){Styles.setCss(i,{x:e})}}),Object.defineProperty(i,"y",{get:function(){return+t()[5]},set:function(e){Styles.setCss(i,{y:e})}}),Object.defineProperty(i,"width",{get:function(){return i.offsetWidth},set:function(e){Styles.setCss(i,{width:e})}}),Object.defineProperty(i,"height",{get:function(){return i.offsetHeight},set:function(e){Styles.setCss(i,{height:e})}}),Object.defineProperty(i,"enabled",{get:function(){return a},set:function(e){a=e,i.dispatchEvent(new CustomEvent("uiComponentEnabled"))}}),Object.defineProperty(i,"showing",{get:function(){return n},set:function(){trace(":: WARNING ::\n\n	UIComponent.showing cannot be set.\n\n")}}),i.hide=function(){i.style.display="none",n=!0},i.show=function(){try{trace("    try removeProperty()"),i.style.removeProperty("display")}catch(e){trace("    catch display = null"),i.style.display=null}n=!1},i.setCss=function(e){Styles.setCss(i,e)},i.inspect=function(){for(var e={},t=Object.getOwnPropertyNames(i),a=0;a<t.length;a++){var n=i[t[a]];e[t[a]]=n}trace("\n	",i.toString(),"	",i.id,"\n	",e)},i.toString=function(){return"[object UIComponent]"},i.enabled=!0,i}function UIImage(e){Styles.createClass("uiImage","ui-image","position:absolute; background-repeat:no-repeat; background-size:cover;");var t=null;e.css||{};if(!e.source)throw new Error("UIImage : No image source set on '"+e.id+"'");var t=ImageManager.get(e.source);e.css=e.css||{},e.css.width=void 0!=e.css.width?e.css.width:t.width,e.css.height=void 0!=e.css.height?e.css.height:t.height,e.css.backgroundImage=t.src;var a=new UIComponent(e);return Styles.addClass(a,"ui-image"),Object.defineProperty(a,"source",{get:function(){return t},set:function(e){t=e,a.style.backgroundImage="url("+ImageManager.get(e).src+")"}}),a.toString=function(){return"[object UIImage]"},a}function FrameRateBase(e){var t=this;t.pool=[],t.fps=e,t._frameTime=Math.floor(1e3/t.fps),t._prevTime=0,t._startTime=0,t._nextTime=0,t._maxLag=400,t._shiftLag=30,t._paused=!1}function GestureBase(e){var t=this;t.elem=e,t.hasActiveChildren=!0,t.debug=!1,t._isDragging=!1,t._isDrag=!1,t._give=2,t._total=0,t._xOff=0,t._xPrev=0,t._xPrev2=0,t._xStart=0,t._xVelocity=0,t._yOff=0,t._yPrev=0,t._yPrev2=0,t._yStart=0,t._yVelocity=0,t._isSelectBubbleStop=!1,t.init()}function GestureEvent(){var e=new CustomEvent("onDragStart");e.position={x:0,y:0},e.element={x:0,y:0};var t=new CustomEvent("onDrag");t.position={x:0,y:0},t.velocity={x:0,y:0},t.element={x:0,y:0},t.page={x:0,y:0};var a=new CustomEvent("onDragStop");a.position={x:0,y:0},a.velocity={x:0,y:0};var n=new CustomEvent("onSwipe");n.direction={x:null,y:null},n.distance={x:0,y:0},n.velocity={x:0,y:0};var i=new CustomEvent("onPress");i.position={x:0,y:0},i.page={x:0,y:0};var r=new CustomEvent("onRelease"),s=new CustomEvent("onFinishGestures"),o="desktop"!=Device.type?"touchend":"click";return{OVER:"mouseover",OUT:"mouseout",DOWN:"onPress",PRESS:"onPress",UP:"onRelease",RELEASE:"onRelease",CLICK:o,DRAG:"onDrag",DRAG_START:"onDragStart",DRAG_STOP:"onDragStop",SWIPE:"onSwipe",drag:t,dragStart:e,dragStop:a,swipe:n,press:i,release:r,finish:s,FINISH:"onFinishGestures"}}function Border(e,t,a,n,i,r){Styles.createClass("RED_Border","border-left, border-right","position:absolute; height:100%;","border-top, border-bottom","position:absolute; width:100%;","border-top","top:0px;","border-bottom","bottom:0px;","border-left","top:0px;","border-right","right:0px; top:0px;");var s=Markup.getElement(t),o=a;i=i?" opacity: "+i+";":"",r=r?" z-index: "+r+";":"";for(var l=["top","right","bottom","left"],d=0;4>d;d++){var u=(d%2?"width":"height")+":"+o+"px; ";u+="background-color: "+n+";"+i+r;var c=document.createElement("div");c.id=e+"-"+d,c.style.cssText=u,Styles.addClass(c,"border-"+l[d]),s.appendChild(c),this[l[d]]=c}Object.defineProperty(this,"container",{get:function(){return s}}),Object.defineProperty(this,"size",{get:function(){return o},set:function(e){o=e;for(var t=0;4>t;t++){var a=t%2?"width":"height";Styles.setCss(this[l[t]],a,o)}}})}function CanvasDrawerStage(e,t,a,n,i,r){var s=this;s.qualityScale=r,a.width*=s.qualityScale,a.height*=s.qualityScale,s.canvas=Markup.addCanvas({id:e,target:t,css:a,styles:n},i),1!==s.qualityScale&&TweenLite.set(s.canvas,{scale:1/s.qualityScale,transformOrigin:"0% 0%"}),s.ctx=s.canvas.getContext("2d"),s.elements={},s.allTweens={},s.allTweensSize=0,s.elementsLength=0,s.dummyTween,s.tween={to:function(e,t,a){s._tweenEngine("to",[e,t,a])},from:function(e,t,a){s._tweenEngine("from",[e,t,a])},fromTo:function(e,t,a,n){s._tweenEngine("fromTo",[e,t,a,n])},set:function(e,t){s._tweenEngine("set",[e,t])},start:function(e){s._tweenStart(e)},kill:function(){s._tweenKill()}},Object.defineProperty(s,"width",{get:function(){return s.canvas.width/s.qualityScale},set:function(e){s.canvas.width=e*s.qualityScale}}),Object.defineProperty(s,"height",{get:function(){return s.canvas.height/s.qualityScale},set:function(e){s.canvas.height=e*s.qualityScale}})}function CanvasDrawerElement(e,t,a){var n=this;n._type=t.type||a,n.drawer=e,n.id=t.id||"canvasdItem"+e.elementsLength,e.elements[n.id]=n,e.elementsLength++,n.isActive=t.isActive!==!1,n.rotation=t.params.rotation||0,n.scaleX=0===t.params.scaleX?0:t.params.scaleX||1,n.scaleY=0===t.params.scaleY?0:t.params.scaleY||1,n.alpha=t.params.alpha>=0?t.params.alpha:t.params.opacity>=0?t.params.opacity:1,n.blendMode=t.blendMode||"source-over",t.stroke=t.stroke||{};var i=!!t.dropShadow;t.dropShadow=t.dropShadow||{},n.init(),n._shadowAngle=t.dropShadow.angle||0,n.shadowDistance=t.dropShadow.distance||0,n._shadowColor=t.dropShadow.color||(i?"#000000":null),n.shadowAlpha=t.dropShadow.alpha||n._shadowAlpha,n.shadowBlur=t.dropShadow.blur||0}function AdData(e){function t(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=a.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}this.adDataRaw=e?e:{},trace("  adDataRaw:"),trace(this.adDataRaw),this.elements={},this.elements.redAdContainer=Markup.getElement("redAdContainer"),this.edgeData=new EdgeData,this.skipQuiz="true"==t("skipQuiz"),this.guideLabel="",this.guide=this.guideLabel?ImageManager.addToLoad(this.guideLabel+".jpg",adParams.imagesPath):"",this.videoMuted=!1,this.videoIDs=["video1","video2","video3","video4","video5"],this.curVideoPlayer,this.primaryFont="Flama-ExtraBold-optimized",this.secondaryFont="Flama-ExtraboldItalic-optimized",this.tertiaryFont="Flama-BoldItalic-ALLCAPS",this.quaternaryFont="Flama-BookItalic-optimized",this.huluColors={primaryGreen:"#66AA33",secondaryGreen:"#99CC33",tertiaryGreen:"#41811E",black:"#222222",darkGrey:"#666666",lightGrey:"#E8E8E8"},this.greyColor="#212221",this.wrongColor="#f30009",this.whiteColor="#ffffff",this.userInteracted=!1,this.autoplay=!0,this.introText1=ftData.introText1,this.introText2=ftData.introText2,this.startCTA=ftData.startCTA.toUpperCase(),this.quizHeader=ftData.quizHeader,this.getReady=ftData.getReady,this.quizCTA=ftData.quizCTA,this.continueCTA=ftData.continueCTA.toUpperCase(),this.quizTimerTicking=!1,this.score=0,this.questionTime=7,this.questionQuickResolveTime=.25,this.questions=[];var a,n,i=5;for(n=0;i>n;n++)a="question"+(n+1),ftData[a+"Image"]&&this.questions.push({id:a,question:ftData[a],answer:ftData[a+"CorrectAnswer"],answers:[ftData[a+"answerA"].toUpperCase(),ftData[a+"answerB"].toUpperCase(),ftData[a+"answerC"].toUpperCase(),ftData[a+"answerD"].toUpperCase()],image:ImageManager.addToLoad(ftData[a+"Image"],adParams.adPath),video:""});this.totalIntroImages=parseInt(ftData.totalIntroImages)>this.questions.length?this.questions.length:parseInt(ftData.totalIntroImages),this.resultText1Good=ftData.resultText1Good,this.resultText1Ok=ftData.resultText1Ok,this.resultText1Bad=ftData.resultText1Bad,this.resultText2Good=ftData.resultText2Good,this.resultText2Ok=ftData.resultText2Ok,this.resultText2Bad=ftData.resultText2Bad,this.resultText=function(e){var t=this.score<2?this["resultText"+e+"Bad"]:this.score<this.questions.length?this["resultText"+e+"Ok"]:this["resultText"+e+"Good"];return t},this.endframeHeadline=ftData.endframeHeadline.toUpperCase(),this.endframeOnHulu=ftData.endframeOnHulu.toUpperCase(),this.endframeCTA1=ftData.endframeCTA1,this.endframeCTA2=ftData.endframeCTA2,this.replay=ftData.replay,this.endframeImages=[],this.endframeURLs=[];var r=20;for(n=0;r>n;n++)a="endframeImage"+(n+1),ftData[a]&&(this.endframeImages.push(ImageManager.addToLoad(ftData[a],adParams.adPath)),this.endframeURLs.push(ftData["endframeImageUrl"+(n+1)]));this.networkExit=function(e){var t=e?e:clickTag;Network.exit(t),this.curVideoPlayer?this.curVideoPlayer.onPlayPause(!0):this.quizTimerTicking&&(adData.userInteracted=!1,adData.elements.quiz.pause())},this.isMobile="desktop"!=Device.type,trace("!!!!!!!!! IS THIS DEVICE ON MOBILE !!!!!!!",this.isMobile)}function FtData(){this.validateImagePath=function(e){return""==e||e.indexOf("null")>-1||e.indexOf("ftBlankGif")>-1?null:remoteControl.debug?e.replace(/\.\.\//g,""):e},this.introText1=myFT.instantAds.intro_text_1||"Think you know your TV?",this.introText2=myFT.instantAds.intro_text_2||"Letâ€™s find out.",this.totalIntroImages=myFT.instantAds.total_intro_images||"4",this.startCTA=myFT.instantAds.start_cta||"START PLAYING",this.continueCTA=myFT.instantAds.continueCTA||"CONTINUE PLAYING",this.getReady=myFT.instantAds.get_ready||"GET READY TO GUESS THE SHOW!",this.quizHeader=myFT.instantAds.quiz_header||"If You Know TV...",this.quizCTA=myFT.instantAds.quiz_cta||"Start Your Free Trial",this.question1=myFT.instantAds.question_1||"Then you should know this show",this.question1answerA=myFT.instantAds.question_1_answer_a||"SEINFELD",this.question1answerB=myFT.instantAds.question_1_answer_b||"CHEERS",this.question1answerC=myFT.instantAds.question_1_answer_c||"THREE'S COMPANY",this.question1answerD=myFT.instantAds.question_1_answer_d||"DAWSON'S CREEK",this.question1CorrectAnswer=myFT.instantAds.question_1_correct_answer||"A",this.question2=myFT.instantAds.question_2||"Then you should know this show",this.question2answerA=myFT.instantAds.question_2_answer_a||"CHICAGO P.D.",this.question2answerB=myFT.instantAds.question_2_answer_b||"CSI",this.question2answerC=myFT.instantAds.question_2_answer_c||"MURDER IN THE FIRST",this.question2answerD=myFT.instantAds.question_2_answer_d||"BLINDSPOT",this.question2CorrectAnswer=myFT.instantAds.question_2_correct_answer||"D",this.question3=myFT.instantAds.question_3||"Then you should know this movie",this.question3answerA=myFT.instantAds.question_3_answer_a||"PROJECT ALMANAC",this.question3answerB=myFT.instantAds.question_3_answer_b||"TERMINATOR GENISYS",this.question3answerC=myFT.instantAds.question_3_answer_c||"TRANSFORMERS<br>AGE OF EXTINCTION",this.question3answerD=myFT.instantAds.question_3_answer_d||"SHAUN THE SHEEP:<br>THE MOVIE",this.question3CorrectAnswer=myFT.instantAds.question_3_correct_answer||"B",this.question4=myFT.instantAds.question_4||"Then you should know this show",this.question4answerA=myFT.instantAds.question_4_answer_a||"NEW GIRL",this.question4answerB=myFT.instantAds.question_4_answer_b||"PARKS AND RECREATION",this.question4answerC=myFT.instantAds.question_4_answer_c||"THE MINDY PROJECT",this.question4answerD=myFT.instantAds.question_4_answer_d||"SUPERSTORE",this.question4CorrectAnswer=myFT.instantAds.question_4_correct_answer||"C",this.question5=myFT.instantAds.question_5||"Then you should know this show",this.question5answerA=myFT.instantAds.question_5_answer_a||"THE STRAIN",this.question5answerB=myFT.instantAds.question_5_answer_b||"RESCUE ME",this.question5answerC=myFT.instantAds.question_5_answer_c||"TIMELESS",this.question5answerD=myFT.instantAds.question_5_answer_d||"HOMELAND",this.question5CorrectAnswer=myFT.instantAds.question_5_correct_answer||"D",this.resultText1Good=myFT.instantAds.result_text_1_good||"What-the-Whaa? You really know your TV!",this.resultText1Ok=myFT.instantAds.result_text_1_ok||"Okay, okay. Not too bad.",this.resultText1Bad=myFT.instantAds.result_text_1_bad||"Umm. Not exactly a TV genius, are you?",this.resultText2Good=myFT.instantAds.result_text_2_good||"You got all of them right!",this.resultText2Ok=myFT.instantAds.result_text_2_ok||"But you've got some catching up to do.",this.resultText2Bad=myFT.instantAds.result_text_2_bad||"Thank goodness we found you.",this.endframeHeadline=myFT.instantAds.endframe_headline||"THIS FALL DON'T JUST WATCH TV, MAKE IT YOURS",this.endframeOnHulu=myFT.instantAds.endframe_on_hulu||"",this.endframeCTA1=myFT.instantAds.endframe_cta_1||"",this.endframeCTA2=myFT.instantAds.endframe_cta_2||"Start Your Free Trial",this.replay=myFT.instantAds.replay||"REPLAY",this.endframeImageUrl1=myFT.instantAds.endframe_image_1_url||"http://www.hulu.com/start?show=seinfeld",this.endframeImageUrl2=myFT.instantAds.endframe_image_2_url||"http://www.hulu.com/start?show=blindspot",this.endframeImageUrl3=myFT.instantAds.endframe_image_3_url||"http://www.hulu.com/watch/958003",this.endframeImageUrl4=myFT.instantAds.endframe_image_4_url||"http://www.hulu.com/start?show=the-mindy-project",this.endframeImageUrl5=myFT.instantAds.endframe_image_5_url||"http://www.hulu.com/start?show=homeland",this.endframeImageUrl6=myFT.instantAds.endframe_image_6_url||"http://www.hulu.com/start",this.endframeImageUrl7=myFT.instantAds.endframe_image_7_url||"http://www.hulu.com/start",this.endframeImageUrl8=myFT.instantAds.endframe_image_8_url||"http://www.hulu.com/start",this.endframeImageUrl9=myFT.instantAds.endframe_image_9_url||"http://www.hulu.com/start",this.endframeImageUrl10=myFT.instantAds.endframe_image_10_url||"http://www.hulu.com/start",this.endframeImageUrl11=myFT.instantAds.endframe_image_11_url||"http://www.hulu.com/start",this.endframeImageUrl12=myFT.instantAds.endframe_image_12_url||"http://www.hulu.com/start",this.endframeImageUrl13=myFT.instantAds.endframe_image_13_url||"http://www.hulu.com/start",this.endframeImageUrl14=myFT.instantAds.endframe_image_14_url||"http://www.hulu.com/start",this.endframeImageUrl15=myFT.instantAds.endframe_image_15_url||"http://www.hulu.com/start",this.endframeImageUrl16=myFT.instantAds.endframe_image_16_url||"http://www.hulu.com/start",this.endframeImageUrl17=myFT.instantAds.endframe_image_17_url||"http://www.hulu.com/start",this.endframeImageUrl18=myFT.instantAds.endframe_image_18_url||"http://www.hulu.com/start",this.endframeImageUrl19=myFT.instantAds.endframe_image_19_url||"http://www.hulu.com/start",this.endframeImageUrl20=myFT.instantAds.endframe_image_20_url||"http://www.hulu.com/start",this.question1Image=this.validateImagePath(myFT.instantAds.question_1_image||"instantAssets/quiz_seinfeld.jpg"),this.question2Image=this.validateImagePath(myFT.instantAds.question_2_image||"instantAssets/quiz_blindspot.jpg"),this.question3Image=this.validateImagePath(myFT.instantAds.question_3_image||"instantAssets/quiz_terminatorgenisys.jpg"),this.question4Image=this.validateImagePath(myFT.instantAds.question_4_image||"instantAssets/quiz_mindyproject.jpg"),this.question5Image=this.validateImagePath(myFT.instantAds.question_5_image||"instantAssets/quiz_homeland.jpg"),this.endframeImage1=this.validateImagePath(myFT.instantAds.endframe_image_1||"instantAssets/thumb_seindfeld.jpg"),this.endframeImage2=this.validateImagePath(myFT.instantAds.endframe_image_2||"instantAssets/thumb_blindspot.jpg"),this.endframeImage3=this.validateImagePath(myFT.instantAds.endframe_image_3||"instantAssets/thumb_terminatorgenisys.jpg"),this.endframeImage4=this.validateImagePath(myFT.instantAds.endframe_image_4||"instantAssets/thumb_mindyproject.jpg"),this.endframeImage5=this.validateImagePath(myFT.instantAds.endframe_image_5||"instantAssets/thumb_homeland.jpg"),this.endframeImage6=this.validateImagePath(myFT.instantAds.endframe_image_6||"instantAssets/ftBlankGif.gif"),this.endframeImage7=this.validateImagePath(myFT.instantAds.endframe_image_7||"instantAssets/ftBlankGif.gif"),this.endframeImage8=this.validateImagePath(myFT.instantAds.endframe_image_8||"instantAssets/ftBlankGif.gif"),this.endframeImage9=this.validateImagePath(myFT.instantAds.endframe_image_9||"instantAssets/ftBlankGif.gif"),this.endframeImage10=this.validateImagePath(myFT.instantAds.endframe_image_10||"instantAssets/ftBlankGif.gif"),this.endframeImage11=this.validateImagePath(myFT.instantAds.endframe_image_11||"instantAssets/ftBlankGif.gif"),this.endframeImage12=this.validateImagePath(myFT.instantAds.endframe_image_12||"instantAssets/ftBlankGif.gif"),this.endframeImage13=this.validateImagePath(myFT.instantAds.endframe_image_13||"instantAssets/ftBlankGif.gif"),this.endframeImage14=this.validateImagePath(myFT.instantAds.endframe_image_14||"instantAssets/ftBlankGif.gif"),this.endframeImage15=this.validateImagePath(myFT.instantAds.endframe_image_15||"instantAssets/ftBlankGif.gif"),this.endframeImage16=this.validateImagePath(myFT.instantAds.endframe_image_16||"instantAssets/ftBlankGif.gif"),this.endframeImage17=this.validateImagePath(myFT.instantAds.endframe_image_17||"instantAssets/ftBlankGif.gif"),this.endframeImage18=this.validateImagePath(myFT.instantAds.endframe_image_18||"instantAssets/ftBlankGif.gif"),this.endframeImage19=this.validateImagePath(myFT.instantAds.endframe_image_19||"instantAssets/ftBlankGif.gif"),this.endframeImage20=this.validateImagePath(myFT.instantAds.endframe_image_20||"instantAssets/ftBlankGif.gif"),this.getImage=function(e,t){var a;return myFT.instantAds[e]?a=myFT.instantAds[e]:e in this.imageMap&&(a=t in this.imageMap[e]?this.imageMap[e][t]:this.imageMap[e].default),a?this.validateImagePath(a):void 0}}trace("----------------------------------------------------------------------------------------------------------------------------"),trace(" AV_Club_Quiz_Billboard_FT_970x250_text_payload.js[ Hulu | Pre_Fall_and_Fall_Campaign | RichMedia_Quiz | AV_Club_Quiz_Billboard_FT | 970x250 | 2.0 ]"),trace("  "),trace("  "),trace("  VERSION - template.txt[ Template: Flashtalking - Base, AdApp: 1.1.99, AdHtml: v2.6.2, Instance: 08/25/16 10:06am ]"),trace("----------------------------------------------------------------------------------------------------------------------------");var PrepareCore=new function(){function e(){"payload"in assets&&assets.payload.binary.length&&(trace("PrepareCore.prepareFbaPayload()"),r.wait(),new Loader(adParams.adPath+assets.payload.binary[0],{name:"fbaLoader",scope:global,fileType:"fba",onFail:failAd,onComplete:function(e){new Loader(e,{name:"fbaContentLoader",scope:global,onFail:failAd,onComplete:t}).load()}}).load())}function t(e){ImageManager.addFbaImages(e),r.done()}function a(){ImageManager.addLoader(new Loader(assets.images,{name:"indexImages",prepend:adParams.imagesPath})),ImageManager.addLoader(new Loader(assets.edgeImages,{name:"edgeImages",prepend:adParams.edgePath}))}function n(){if(trace("PrepareCore.loadFonts()"),adParams.useFontJS){trace(' - using "Font.js", requesting:');var e=assets.fonts.concat(assets.edgeFonts);for(var t in e){trace("	"+e[t]),r.wait();var a=new Font;a.onload=i,a.onerror=function(){trace('"Font.js" FAILED to load fonts.'),failAd()},a.fontFamily=e[t].substring(e[t].lastIndexOf("/")+1,e[t].indexOf(".")),a.src=adParams.fontsPath+e[t]}}else r.wait(),fontLoader=new Loader({name:"fontLoader",onComplete:i,onFail:global.failAd,scope:s}),fontLoader.add(new Loader(assets.fonts,{name:"fontSubLoader",prepend:adParams.fontsPath,fileType:"ttf"})),fontLoader.add(new Loader(assets.edgeFonts,{name:"fontEdgeSubLoader",prepend:adParams.fontsPath,fileType:"ttf"})),fontLoader.load()}function i(){r.done()}var r,s=this;s.init=function(t){trace("PrepareCore.init()"),r=new Async,r.onComplete(t),e(),a(),n(),Device.init(),Device.trace(),Gesture.init(),CssManager.init(),r.start()}},Async=function(){var e=this;e.wait=function(){i.push(1)},e.done=function(){i.pop()},e.onComplete=function(e){t=e},e.start=function(){n=setInterval(r,a),r()};var t,a=25,n=-1,i=[],r=function(){t&&!i.length&&(clearInterval(n),t.call())}},Device=new function(){function e(){var e=!1;!function(t){var a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;t.substr(0,4).match(a)&&(e=!0)}(n.agentString||navigator.vendor||window.opera),n.agentString.match(/ipad/i)&&(e=!1),n.type=n.agentString.match(/intel mac/i)?"desktop":e?"mobile":"tablet"}function t(){var e,t=n.agentString.match(/(fban|fbav|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i);if(t){if(t[1].match(/trident/i)){n.browser="ie";var e=/\brv[ :]+(\d+)/g.exec(n.agentString);return void(e&&(n.browserVersion=e[1]))}if(e=n.agentString.match(/\bOPR\/([0-9\.]+)/),"Chrome"==t[1]&&e)return n.browser="opera",void(n.browserVersion=e[1]);if(e=n.agentString.match(/\bCriOS\/([0-9\.]+)/))return n.browser="chrome",void(n.browserVersion=e[1]);if(t[1].match(/msie/i))return n.browser="ie",void(n.browserVersion=t[2]);if(t[1].match(/safari/i))return n.browser="safari",e=n.agentString.match(/\sversion\/([0-9\.]+)\s/i),void(e&&(n.browserVersion=e[1]));n.browser=t[1].toLowerCase(),e=n.agentString.match(new RegExp(n.browser+"/([0-9.]+)","i")),e&&(n.browserVersion=e[1])}}function a(){function e(i){clearTimeout(t),a.removeEventListener("playing",e,!1),n.canAutoPlayVideo=void 0!=i&&(!a.paused||0!=a.currentTime),a.parentNode.removeChild(a)}var t,a=document.createElement("video");a.setAttribute("autoplay",""),a.style.cssText="position:absolute; height:0; width:0; display:none",a.src="data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDJpc29tYXZjMQAAAz5tb292AAAAbG12aGQAAAAAzaNacc2jWnEAAV+QAAFfkAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAGGlvZHMAAAAAEICAgAcAT////3//AAACQ3RyYWsAAABcdGtoZAAAAAHNo1pxzaNacQAAAAEAAAAAAAFfkAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAEAAAABAAAAAAAd9tZGlhAAAAIG1kaGQAAAAAzaNacc2jWnEAAV+QAAFfkFXEAAAAAAAhaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAAAAAAGWbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABVnN0YmwAAACpc3RzZAAAAAAAAAABAAAAmWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAEAAQAEgAAABIAAAAAAAAAAEOSlZUL0FWQyBDb2RpbmcAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwH0AAr/4QAZZ/QACq609NQYBBkAAAMAAQAAAwAKjxImoAEABWjOAa8gAAAAEmNvbHJuY2xjAAYAAQAGAAAAGHN0dHMAAAAAAAAAAQAAAAUAAEZQAAAAKHN0c3oAAAAAAAAAAAAAAAUAAAIqAAAACAAAAAgAAAAIAAAACAAAAChzdHNjAAAAAAAAAAIAAAABAAAABAAAAAEAAAACAAAAAQAAAAEAAAAYc3RjbwAAAAAAAAACAAADYgAABaQAAAAUc3RzcwAAAAAAAAABAAAAAQAAABFzZHRwAAAAAAREREREAAAAb3VkdGEAAABnbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcgAAAAAAAAAAAAAAAAAAAAA6aWxzdAAAADKpdG9vAAAAKmRhdGEAAAABAAAAAEhhbmRCcmFrZSAwLjkuOCAyMDEyMDcxODAwAAACUm1kYXQAAAHkBgX/4NxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxMjAgLSBILjI2NC9NUEVHLTQgQVZDIGNvZGVjIC0gQ29weWxlZnQgMjAwMy0yMDExIC0gaHR0cDovL3d3dy52aWRlb2xhbi5vcmcveDI2NC5odG1sIC0gb3B0aW9uczogY2FiYWM9MCByZWY9MSBkZWJsb2NrPTE6MDowIGFuYWx5c2U9MHgxOjAgbWU9ZXNhIHN1Ym1lPTkgcHN5PTAgbWl4ZWRfcmVmPTAgbWVfcmFuZ2U9NCBjaHJvbWFfbWU9MSB0cmVsbGlzPTAgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0wIGNocm9tYV9xcF9vZmZzZXQ9MCB0aHJlYWRzPTYgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTUwIGtleWludF9taW49NSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmM9Y3FwIG1idHJlZT0wIHFwPTAAgAAAAD5liISscR8A+E4ACAACFoAAITAAAgsAAPgYCoKgoC+L4vi+KAvi+L4YfAEAACMzgABF9AAEUGUgABDJiXnf4AAAAARBmiKUAAAABEGaQpQAAAAEQZpilAAAAARBmoKU",document.getElementsByTagName("body")[0].appendChild(a),setTimeout(function(){a.addEventListener("playing",e,!1),t=setTimeout(e,1e3)},0)}var n=this;n.agentString=void 0,n.brand="unknown",n.product="unknown",n.type=void 0,n.os="unknown",n.osVersion="unknown",n.browser=void 0,n.browserVersion=void 0,n.windowWidth=void 0,n.windowHeight=void 0,n.orientation=void 0,n.pixelRatio=void 0,n.canAutoPlayVideo=!1,n.documentTouch=void 0,n.init=function(){trace("Device.init()"),n.agentString=navigator.userAgent,n.documentTouch=window.DocumentTouch,e();var i={apple:/ip(hone|od|ad)|(mac)/gi.exec(n.agentString),microsoft:/(windows)|(windows phone)/i.exec(n.agentString),nt:/\sNT\s/i.exec(n.agentString),windowsPhone:/windows phone/i.exec(n.agentString),android:/android/i.exec(n.agentString),chromeOS:/CrOS/.exec(n.agentString),blackberry:/blackberry/i.exec(n.agentString)};if(i.apple)if(n.brand="apple",n.product=i.apple[0].toLowerCase(),"ipad"==n.product&&(window.ondevicemotion=function(e){n.product=e.acceleration?2==window.devicePixelRatio?"ipad3":"ipad2":"ipad1",window.ondevicemotion=null}),"mac"==n.product){n.os="osx";var r=/10[\.\_\d]+/.exec(n.agentString);r&&(n.osVersion=r[0]),/[\_]/.test(n.osVersion)&&(n.osVersion=n.osVersion.split("_").join("."))}else{n.os="ios";var s=n.agentString.indexOf("OS ");s>-1&&(n.osVersion=n.agentString.substr(s+3,3).replace("_","."))}else if(i.microsoft){if(n.brand="microsoft",n.os="windows",n.product=i.microsoft[0].toLowerCase(),i.nt){var o=[{signature:"5.1",name:"xp"},{signature:"5.2",name:"xp"},{signature:"6.0",name:"vista"},{signature:"6.1",name:"7"},{signature:"6.2",name:"8"},{signature:"6.3",name:"8.1"},{signature:"10.0",name:"10"}],r=/nt\s[^(\)|;)]*/i.exec(n.agentString);if(r)for(var l=r[0].replace("NT ",""),d=0;d<o.length;d++)if(l===o[d].signature){n.osVersion=o[d].name,n.type="desktop";break}}else if(i.windowsPhone){var r=/windows\sphone\s[^;]*/i.exec(n.agentString);r&&(n.osVersion=r[0].replace("Windows Phone ",""))}}else if(i.android)n.brand=n.product=n.os="android",n.osVersion=n.agentString.substr(n.agentString.indexOf("Android ")+8,3);else if(i.chromeOS){n.brand=n.product=n.os="chromeos";var r=/CrOS\s\S+\s(\d+\.\d+\.\d+)/.exec(n.agentString);r&&(n.osVersion=r[1]),n.type="desktop"}else i.blackberry&&(n.product=i.blackberry[0].toLowerCase(),n.brand="rim");n.pixelRatio=window.devicePixelRatio||"unknown",n.getOrientation(),t(),a()},n.trace=function(){trace("Device.trace()"),trace("------------------------------------------------"),trace(" AGENT( "+n.agentString+" )"),trace("  Brand:				"+n.brand),trace("  Product:			"+n.product),trace("  Type:				"+n.type),trace("  Os:				"+n.os+"( "+n.osVersion+" )"),trace("  Browser:			"+n.browser+"( "+n.browserVersion+" )"),trace("  Window: 			"+n.windowWidth+"x"+n.windowHeight),trace("  Orientation:		"+n.orientation),trace("  Pixel Ratio:		"+n.pixelRatio),trace("  Document Touch:	",n.documentTouch),trace("  Auto Play Video:	"+n.canAutoPlayVideo),trace("------------------------------------------------")},n.getOrientation=function(){return n.getScreenResolution(),n.orientation=n.windowWidth>n.windowHeight?"landscape":"portrait",n.orientation},n.getScreenResolution=function(){return"apple"!==n.brand?(n.windowWidth=window.width||window.innerWidth,n.windowHeight=window.height||window.innerHeight):(n.windowWidth=window.innerWidth,n.windowHeight=window.innerHeight),{width:n.windowWidth,height:n.windowHeight}}},CssManager=new function(){var e=this;e.init=function(){trace("CssManager.init()"),e.generateBrowserKeyDictionary()},e.debug_level1=!1,e.debug_level2=!1,e.filter,e.debug_element,e.debug_css_list,e.setDebugLevel=function(t){switch(parseInt(t)){case 1:e.debug_level1=!0,e.debug_level2=!1;break;case 2:e.debug_level1=!0,e.debug_level2=!0;break;default:e.debug_level1=!1,e.debug_level2=!1}},e.setDebugFilter=function(t){trace("CssManager.setDebugFilter(),",t),e.filter=t,e.debug_level1=!0},e.ifDebug=function(t){return e.filter?e.passDebugFilter()&&e[t]?!0:void 0:e[t]},e.passDebugFilter=function(){if(e.debug_element&&e.debug_element.id.indexOf(e.filter)>-1)return!0;if(e.debug_css_list)for(var t in e.debug_css_list){if(t.indexOf(e.filter)>-1)return!0;if(String(e.debug_css_list[t]).indexOf(e.filter)>-1)return!0}return!1},e.deviceKeyDict,e.generateBrowserKeyDictionary=function(){trace("CssManager.generateBrowserKeyDictionary()"),e.deviceKeyDict={};for(var t in document.createElement("div").style){var a=e.formatKey(t,"hyphen"),n=e.stripPrefix(a);n in e.deviceKeyDict?e.hasPrefix(a)&&(e.deviceKeyDict[n]=a):e.deviceKeyDict[n]=a}switch(Device.browser){case"chrome":case"safari":break;case"firefox":e.deviceKeyDict.transform="transform",e.deviceKeyDict["transform-origin"]="transform-origin"}trace(" KEY DICTIONARY:",e.deviceKeyDict)},e.apply=function(t,a){e.debug_element=t,e.debug_css_list=a,e.ifDebug("debug_level1")&&trace("  CssManager.apply()",t.id);for(var n in a)n.match(/^transform\(/)?e.applyTransform(t,n,a[n]):(e.ifDebug("debug_level1")&&trace("   "+n+": "+a[n]+";"),t.style[e.getDeviceKey(n)]=a[n]);e.ifDebug("debug_level1")&&trace("\n\n"),e.debug_element=null,e.debug_css_list=null},e.conformCssObject=function(t,a){e.debug_element=a,e.ifDebug("debug_level1")&&trace(" CssManager.conformCssObject()");var n={};if(t)for(var i in t){e.ifDebug("debug_level2")&&trace("  PARSE( key: "+i+", value: "+t[i]+" )");var r=e.conformKeyValue(i,t[i]);for(var s in r)e.ifDebug("debug_level2")&&trace("    CONFORMED DECLARATION:",r[s]),n[r[s][0]]=r[s][1]}return e.debug_element=null,n},e.conformCssString=function(t,a){e.debug_element=a,e.ifDebug("debug_level1")&&trace(" CssManager.conformCssString()");var n={};if(t){var i=t.split(/\s*;\s*/);for(var r in i)if(i[r]){var s=i[r].split(/:(.+)?/);e.ifDebug("debug_level2")&&trace("  PARSE( key: "+s[0]+", value: "+s[1]+" )");var o=e.conformKeyValue(s[0],s[1]);for(var l in o)e.ifDebug("debug_level2")&&trace("    CONFORMED DECLARATION:",o[l]),n[o[l][0]]=o[l][1]}}return e.debug_element=null,n},e.conformCssKeyValue=function(t,a){e.ifDebug("debug_level1")&&trace(" CssManager.conformCssKeyValue()");var n={};return n[t]=a,e.conformCssObject(n)},e.applyTransform=function(t,a,n){e.ifDebug("debug_level1")&&trace("    - CssManager.applyTransform(), "+a+": "+n);var i=new Matrix2D,r=t.style[e.getDeviceKey("transform")],s=r.match(/matrix[^\)]+\)/);s&&(i.setFromCss(s[0]),e.ifDebug("debug_level2")&&trace("       existing matrix:",i.data));var o=a.match(/\(\s([^\s]+)/)[1];if("transforms"in t)var l=t.transforms;else var l={
tx:0,ty:0,rz:0,sx:1,sy:1};var d=-1*l[o];switch(o){case"tx":i.translate(d,0),i.translate(n,0);break;case"ty":i.translate(0,d),i.translate(0,n);break;case"rz":i.rotate(d*Math.PI/180),i.rotate(n*Math.PI/180);break;case"sx":d=1,i.scale(d,1),i.scale(n,1);break;case"sy":d=1,i.scale(1,d),i.scale(1,n)}e.ifDebug("debug_level2")&&trace("        > reverse existing transform( "+o+" ):",d),l[o]=n,t.transforms=l,e.ifDebug("debug_level2")&&trace("       updated matrix:",i.data),t.style[e.getDeviceKey("transform")]=i.getCss()},e.conformKeyValue=function(t,a){t=String(t).trim(),a=String(a).trim();var n=e.formatKey(t,"hyphen");return e.conformValue(n,a)},e.stripPrefix=function(e){return e.replace(/-?(moz|webkit|ms|o)-/,"")},e.hasPrefix=function(e){return e.search(/-?(moz|webkit|ms|o)-/)>-1},e.getDeviceKey=function(t){return t in e.deviceKeyDict?e.deviceKeyDict[t]:t},e.formatKey=function(t,a){return t=e.stripPrefix(t),a=a||"hyphen",e.ifDebug("debug_level2")&&trace('   getting key as "'+a+'"'),t in e.keyFormatExceptions()&&(t="camel"!=a?e.keyFormatExceptions()[t]:e.camelateKey(e.keyFormatExceptions()[t])),"hyphen"==a?t=e.hyphenateKey(t):"camel"==a&&(t=e.camelateKey(t)),e.ifDebug("debug_level2")&&trace('    - result: "'+t+'"'),t},e.hyphenateKey=function(t){return t=t.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}),t=e.hasPrefix(t)&&0!=t.indexOf("-")?"-"+t:t},e.camelateKey=function(e){return e=e.replace(/-(.)/g,function(e){return e.charAt(1).toUpperCase()})},e.keyFormatExceptions=function(){return{bgImage:"background-image",x:"transform( tx )",translateX:"transform( tx )",y:"transform( ty )",translateY:"transform( ty )",rotate:"transform( rz )",rotation:"transform( rz )",scaleX:"transform( sx )",scaleY:"transform( sy )"}},e.conformValue=function(t,a){var n,i=[],r=a.match(/\s/),s=a.match(e.matchNumberRegex());if(!r&&s){e.ifDebug("debug_level2")&&trace("   conform value as number"),n=Number(s[0]);var o=a.match(/[^0-9\.]+$/);if(o)n+=o[0];else switch(t){case"top":case"right":case"bottom":case"left":case"width":case"height":case"font-size":case"line-height":case"border-radius":case"padding":case"margin":case"margin-right":case"margin-left":case"margin-top":case"margin-bottom":n+="px"}}else if("background-image"==t)e.ifDebug("debug_level2")&&trace("   conform value as background image"),a=a.replace(/^url\(\s*['"]*/,"").replace(/['"]*\s*\)$/,""),n='url( "'+a+'" )';else if("transform"==t){e.ifDebug("debug_level2")&&trace('   convert "transform" functions to individual transforms');for(var l=/([a-z0-9]+)\(([^\)]+)\)/gi;params=l.exec(a);){var d=params[2].replace(/\s/g,"").split(",").map(function(e,t,a){return Number(e.match(CssManager.matchNumberRegex())[0])});switch(params[1]){case"translate":i.push(["transform( tx )",d[0]]),i.push(["transform( ty )",d[1]]);break;case"translateX":i.push(["transform( tx )",d[0]]);break;case"translateY":i.push(["transform( ty )",d[0]]);break;case"rotate":i.push(["transform( rz )",d[0]]);break;case"scale":i.push(["transform( sx )",d[0]]),i.push(["transform( sy )",d[1]]);break;case"scaleX":i.push(["transform( sx )",d[0]]);break;case"scaleY":i.push(["transform( sy )",d[0]])}}}else e.ifDebug("debug_level2")&&trace("   conform value as string"),n=a;return void 0!=n&&(e.ifDebug("debug_level2")&&trace('    - result: "'+n+'"'),i.push([t,n])),i},this.matchNumberRegex=function(){return/^[+-]?[0-9]*\.?[0-9]+/}},ImageManager=new function(){function e(e){for(var t=0;t<e.length;t++)if(e[t]instanceof Image||e[t]instanceof SVGElement){var a=e[t];n(a.id),l[a.id]=a}trace("ImageManager:",l),u.call()}function t(){r||(r=new Loader({name:"imageManagerLoader",onComplete:i,onFail:global.failAd}))}function a(e,t){if(d)throw new Error("ImageManager is currently loading...\n\n	Can NOT call ImageManager."+e+"("+(t||"")+") until previous callback is fired.\n\n");return d}function n(e){if(l[e])throw new Error("Duplicate Image Id - One or more images loading in have the same name. Each Image needs a unique file name.")}function i(t){r=null,o=[],d=!1,e(t.getAllContentRaw())}var r,s=this,o=[],l={},d=!1,u=function(){};s.addToLoad=function(e,t){return a("addToLoad",e)?void 0:(e=(t||"")+e,o.push(e),LoaderUtils.getFileName(e))},s.addLoader=function(e){a("addLoader",e)||(t(),r.add(e))},s.get=function(e){if(l[e])return l[e];throw new Error("ImageManager : No image named '"+e+"' has been loaded")},s.load=function(e){a("load")||(d=!0,t(),u=e,r.add(new Loader(o,{name:"dynamicImages"})),r.load())},s.addFbaImages=function(t){t&&e(t.getAllContentRaw())}},Styles=new function(){this.setCss=function(e,t){e=Markup.getElement(e);var a={};if(arguments.length>2)for(var n=1;n<arguments.length;n+=2)a=CssManager.conformCssKeyValue(arguments[n],arguments[n+1]);else a="string"==typeof arguments[1]?CssManager.conformCssString(arguments[1],e):CssManager.conformCssObject(arguments[1],e);CssManager.apply(e,a)},this.getCss=function(e,t){e=Markup.getElement(e);var a,n=window.getComputedStyle(e,null);if("x"==t||"y"==t){var i=n.getPropertyValue("transform").replace(/[\s\(\)matrix]/g,"").split(",");i.length<6&&(i=[0,0,0,0,0,0]),a=+i["x"==t?4:5]}else a=n.getPropertyValue(t).replace(/px/,""),isNaN(a)||(a=parseInt(a,10));return a},this.show=function(e){Styles.setCss(e,"visibility","visible")},this.hide=function(e){Styles.setCss(e,"visibility","hidden")},this.setBackgroundImage=function(e,t){var a=Markup.getElement(e);t instanceof HTMLImageElement&&(t=t.src),a.style.backgroundImage="url("+t+")"},this.setBackgroundColor=function(e,t){var a=Markup.getElement(e);a.style["background-color"]=t},this.getWidth=function(e){var t=Markup.getElement(e);return t.offsetWidth},this.getHeight=function(e){var t=Markup.getElement(e);return t.offsetHeight},this.getTop=function(e){return Styles.getCss(e,"top")},this.getLeft=function(e){return Styles.getCss(e,"left")},this.getX=function(e){return Styles.getCss(e,"x")},this.getY=function(e){return Styles.getCss(e,"y")},this.createClass=function(e,t,a){if(!document.getElementById(e)){var n=document.createElement("style");n.type="text/css",n.id=e;for(var i="",r=0;r<arguments.length-1;r+=2){for(var s=arguments[r+1].split(","),o=0;o<s.length;o++)i+="."+s[o].replace(/^[\s]+/g,""),o<s.length-1&&(i+=",");i+=" { "+(arguments[r+2]||"")+" }\n"}n.innerHTML=i,document.getElementsByTagName("head")[0].appendChild(n)}},this.addClass=function(e,t){for(var a=Markup.getElement(e),n=0;n<arguments.length-1;n++)a.classList.add(arguments[n+1])},this.removeClass=function(e,t){var a=Markup.getElement(e);a.classList.remove(t)}},Markup=new function(){var e=this;e.getElement=function(e){return"string"!=typeof e?e:"head"===e?Markup.getHeader():"body"===e?Markup.getBody():document.getElementById(e)},e.clearElement=function(e){var t=Markup.getElement(e);for(trace("clearElement ("+e+")");t.firstChild;)t.removeChild(t.firstChild)},e.getParent=function(e){return Markup.getElement(e).parentNode},e.getBody=function(){return document.getElementsByTagName("body")[0]},e.getHeader=function(){return document.getElementsByTagName("head")[0]},e.addDiv=function(e){var t=document.createElement("div");return t.id=e.id,Markup.applyContainerCss(t,e),e.target&&Markup.addChild(e.target,t),t},e.applyContainerCss=function(e,t){t.css||(t.css={}),t.css.position||(t.css.position="absolute"),Styles.setCss(e,t.css),Styles.setCss(e,t.styles)},e.removeDiv=function(t){var a=e.getElement(t);a.parentNode.removeChild(a)},e.addTextfield=function(e,t,a,n){a=a||!1;var i="boolean"==typeof a?1:a;a&&(e.css.backgroundColor="rgba(255,0,0,"+i+")");var r=Markup.addDiv(e),s={id:e.id+"_textParent",target:e.id,css:{position:"absolute",width:Styles.getCss(r,"width")-2*e.margin,height:Styles.getCss(r,"height"),left:e.margin}};a&&(s.css.backgroundColor="rgba(0,0,255,"+i+")");var o=Markup.addDiv(s),l={id:e.id+"_textfield",target:s.id,css:{position:"absolute",fontSmoothing:"antialiased",osxFontSmoothing:"grayscale",width:"auto",height:"auto",whiteSpace:e.multiline?"normal":"nowrap"},multiline:!!e.multiline,styles:e.textStyles};a&&(l.css.backgroundColor="rgba(0,180,0,"+i+")");var d=Markup.addDiv(l);if(t&&(d.innerHTML=t),n){var u=Styles.getWidth(d),c=parseInt(e.margin);Styles.setCss(o,"width",u),Styles.setCss(o,"left",c);var h=parseInt(u+2*c);Styles.setCss(r,"width",h);var g=Styles.getHeight(d);Styles.setCss(o,"height",g),Styles.setCss(r,"height",g)}return{container:r,parent:o,textfield:d}},e.addInputField=function(e){var t=document.createElement("input");return t.id=e.id,t.setAttribute("type","text"),t.setAttribute("value",e.defaultValue),e.css.boxSizing="border-box",Markup.applyContainerCss(t,e),Markup.addChild(e.target,t),t},e.addCanvas=function(e,t){var a=document.createElement("canvas");return a.id=e.id,a.width=e.css.width,a.height=e.css.height,delete e.css.width,delete e.css.height,Markup.applyContainerCss(a,e),t!==!1&&Markup.addChild(e.target,a),a},e.addiFrame=function(e){var t=document.createElement("iFrame");return t.id=e.id,t.width=e.css.width,t.height=e.css.height,delete e.css.width,delete e.css.height,t.setAttribute("src",e.source),t.setAttribute("frameborder","0"),t.setAttribute("scrolling","no"),t.setAttribute("allowfullscreen",""),Markup.applyContainerCss(t,e),Markup.addChild(e.target,t),t},e.addSvg=function(e){var t="http://www.w3.org/2000/svg",a=document.createElementNS(t,"svg");a.setAttribute("height",e.height),a.setAttribute("width",e.width);var n=document.createElementNS(t,"path");return n.setAttribute("d",e.d),n.setAttribute("fill",e.fill),void 0!=e.stroke&&n.setAttribute("stroke",e.stroke),void 0!=e.strokeWidth&&n.setAttribute("stroke-width",e.strokeWidth),a.appendChild(n),Markup.applyContainerCss(a,e),Markup.addChild(e.target,a),a},e.addChild=function(e,t){e=Markup.getElement(e),t=Markup.getElement(t),e.appendChild(t)},e.addHtml=function(e,t,a,n){var i=document.createElement("div");i.id=e,i.innerHTML=t,i.style.cssText=a,document.getElementsByTagName(n)[0].appendChild(i)},e.addBorder=function(e,t,a,n,i,r){return new Border(e,t,a,n,i,r)}},Align=function(){function e(e,t,a,i){Styles.setCss(Markup.getElement(t),n(e,t,a,i))}function t(e,t,a){if(e!=Align.TOP&&e!=Align.BOTTOM){var i=n(e,t,a);delete i.top,Styles.setCss(Markup.getElement(t),i)}}function a(e,t,a){if(e!=Align.LEFT&&e!=Align.RIGHT){var i=0,r=a;e!=Align.TOP&&e!=Align.BOTTOM||(i=a);var s=n(e,t,i,r);delete s.left,Styles.setCss(Markup.getElement(t),s)}}function n(e,t,a,n){var s=Markup.getElement(t);a=a||0,n=n||0;var o=[a,n];return e==Align.TOP||e==Align.BOTTOM?o=[0,a]:e!=Align.LEFT&&e!=Align.RIGHT||(o[1]=0),{left:i(e,s.offsetWidth,s.parentNode.offsetWidth)+o[0],top:r(e,s.offsetHeight,s.parentNode.offsetHeight)+o[1]}}function i(e,t,a){e=e||Align.CENTER;var n=0;switch(e){case Align.BOTTOM_RIGHT:case Align.RIGHT:case Align.TOP_RIGHT:n=a-t;break;case Align.CENTER:case Align.TOP:case Align.BOTTOM:n=(a-t)/2;break;default:n=0}return n}function r(e,t,a){e=e||Align.CENTER;var n=0;switch(e){case Align.BOTTOM:case Align.BOTTOM_LEFT:case Align.BOTTOM_RIGHT:n=a-t;break;case Align.CENTER:case Align.LEFT:case Align.RIGHT:n=(a-t)/2;break;default:n=0}return n}return{BOTTOM:"alignBottom",BOTTOM_LEFT:"alignBottomLeft",BOTTOM_RIGHT:"alignBottomRight",CENTER:"alignCenter",LEFT:"alignLeft",RIGHT:"alignRight",TOP:"alignTop",TOP_LEFT:"alignTopLeft",TOP_RIGHT:"alignTopRight",move:e,moveX:t,moveY:a,calculate:n,horizontal:i,vertical:r,centerHorizontal:function(e,a,i){return i?n(Align.CENTER,e,a).left:t(Align.CENTER,e,a)},centerVertical:function(e,t,a){var n=Markup.getElement(e);t=t||0;var i=r(Align.CENTER,n.offsetHeight,n.parentNode.offsetHeight)+t;return a?i:Styles.setCss(n,{top:i})},left:function(e,a,i){return i?n(Align.LEFT,e,a).left:t(Align.LEFT,e,a)},right:function(e,a,i){return i?n(Align.RIGHT,e,a).left:t(Align.RIGHT,e,a)},top:function(e,t,i){return i?n(Align.TOP,e,t).top:a(Align.TOP,e,t)},bottom:function(e,t,i){return i?n(Align.BOTTOM,e,t).top:a(Align.BOTTOM,e,t)}}}(),FrameRate=new function(){function e(){if(!n){for(var t in r)r[t].tick();window.requestAnimationFrame(e)}}for(var t,a=this,n=!0,i=!0,r={},s=/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent),o=["webkit","moz"],l=0;!window.requestAnimationFrame&&l<o.length;l++)window.requestAnimationFrame=window[o[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[l]+"CancelAnimationFrame"]||window[o[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&window.cancelAnimationFrame&&!s||(trace("PolyFill -> FrameRate"),window.requestAnimationFrame=function(e){return setTimeout(e,17)},window.cancelAnimationFrame=clearTimeout),a.register=function(e,t,n){n=n||30,r[n]||(r[n]=new FrameRateBase(n));for(var s=r[n].pool,o=0;o<s.length;o++)if(s[o].from===e&&s[o].handler===t)return;s.push({handler:t,from:e}),i&&a.resume()},a.unregister=function(e,t,n){for(var s in r)if(!n||s==n){for(var o=r[s].pool,l=0;l<o.length;l++)if(o[l].from===e&&o[l].handler===t){o.splice(l,1);break}0==o.length&&delete r[s]}0===Object.keys(r).length&&(a.pause(),i=!0)},a.pause=function(){if(arguments.length>0){for(var e=0;e<arguments.length;e++){var a=arguments[e];r[a]&&(r[a]._paused=!0,n=!0)}for(var s in r)if(!r[s]._paused){n=!1;break}}else{for(var s in r)r[s]._paused=!0;n=!0}n&&(i=!1,window.cancelAnimationFrame(t))},a.resume=function(){var a=!n;if(arguments.length>0)for(var s=0;s<arguments.length;s++){var o=arguments[s];r[o]&&(r[o]._paused=!1,n=!1)}else{for(var l in r)r[l]._paused=!1;n=!1}a||(i=!0,t=window.requestAnimationFrame(e))},a.secondsAsFrames=function(e){return 1/e}};FrameRateBase.prototype={resume:function(){var e=this;e._isPaused&&(e._startTime=Date.now(),e._prevTime=_startTime,e._nextTime=0,e._isPaused=!1)},tick:function(){var e=this;if(!e._paused){var t=!1,a=Date.now(),n=a-e._prevTime;n>e._maxLag&&(trace("...lag"),e._startTime+=n-e._shiftLag),e._prevTime+=n;var i=e._prevTime-e._startTime,r=i-e._nextTime;r>0&&(e._nextTime+=r>=e._frameTime?r:e._frameTime,t=!0),t&&e.dispatch()}},dispatch:function(){for(var e=this,t=0;t<e.pool.length;t++){var a=e.pool[t];a.handler.call(a.from)}}};var Gesture=new function(){function e(e){for(var a=null,n=0;n<l.length;n++)if(l[n].elem===e){a=l[n];break}return a||(a=t(e)),a}function t(e){return _gestureBase=new GestureBase(e),_gestureBase.addEventListener(GestureEvent.FINISH,r),l.push(_gestureBase),_gestureBase}function a(t,a){var n=e(t);if(n.hasActiveChildren!=a){n.hasActiveChildren=a;for(var i=n.elem.getElementsByTagName("*"),r=0;r<i.length;r++)i[r].parentNode==t&&(a?o.enable(i[r]):o.disable(i[r]))}}function n(e,t,a,i){e.style.visibility="hidden",i.push(e);for(var r=document.elementFromPoint(t,a),s=0;s<d.length;s++)if(d[s].elem==r)return n(r,t,a,i);return r}function i(e){for(var t=[],a=n(e.target,e.clientX,e.clientY,t),i=0;i<t.length;i++)t[i].style.visibility="visible";return t=[],e.stopImmediatePropagation(),a}function r(e){for(var t=0;t<l.length;t++)l[t].finishPostStopBubble(e)}function s(e){var t=i(e),a=document.createEvent("HTMLEvents");a.initEvent(e.type,!0,!1),t.dispatchEvent(a)}var o=this,l=[],d=[],u=void 0!=document.createEventObject;o.init=function(){global.GestureEvent=new GestureEvent},o.addEventListener=function(t,a,n){var i=e(t);i.addEventListener(a,n),i._total++,Styles.setCss(t,"cursor","pointer"),Styles.setCss(t,"pointer-events","auto")},o.removeEventListener=function(t,a,n){var i=e(t);i&&(i.removeEventListener(a,n),i._total++,i._total<=0&&Styles.setCss(t,"cursor","auto"))},o.disable=function(t){var a=e(t);d.push(a),u?(a.addEventListener(GestureEvent.CLICK,s),Styles.setCss(t,"cursor","auto")):Styles.setCss(t,"pointer-events","none")},o.disableChildren=function(e){a(e,!1)},o.enable=function(t){for(var a=e(t),n=0;n<d.length;n++)if(a==d[n]){u?a.removeEventListener(GestureEvent.CLICK,s):(Styles.setCss(t,"pointer-events","auto"),Styles.setCss(t,"cursor","pointer"));break}},o.enableChildren=function(e){a(e,!0)}};GestureBase.prototype={init:function(){var e=this;e.debug&&trace("GestureBase.init()"),e._handleDrag=e._handleDrag.bind(e),e._handleSwipe=e._handleSwipe.bind(e),e._handleDown=e._handleDown.bind(e),e._handleUp=e._handleUp.bind(e),e._handleDragStart=e._handleDragStart.bind(e),e._handleTouchStart=e._handleTouchStart.bind(e),e._handleTouchMove=e._handleTouchMove.bind(e),e._handleTouchDrag=e._handleTouchDrag.bind(e),e._handleTouchEnd=e._handleTouchEnd.bind(e),e._handleSelectStopBubble=e._handleSelectStopBubble.bind(e),e.addEventListener=e.elem.addEventListener.bind(e.elem),e.removeEventListener=e.elem.removeEventListener.bind(e.elem),e.elem.addEventListener("touchstart",e._handleTouchStart),e.elem.addEventListener("mousedown",e._handleDown),e.elem.addEventListener(GestureEvent.CLICK,e._handleSelectStopBubble)},_handleDown:function(e){var t=this;t.debug&&trace("GestureBase._handleDown()"),t._isDragging=!1,t._isDrag=!1,window.addEventListener("mouseup",t._handleUp),window.addEventListener("touchend",t._handleTouchEnd),window.addEventListener("mousemove",t._handleDragStart),window.addEventListener("touchmove",t._handleTouchMove);var a=t._getEventScope(e),n=e.target.getBoundingClientRect();GestureEvent.press.position.x=a.pageX-n.left,GestureEvent.press.position.y=a.pageY-n.top,GestureEvent.press.page.x=a.pageX,GestureEvent.press.page.y=a.pageY,t.debug&&trace("  -> dispatch ( PRESS ), event:",a,"touch.layerX:",a.layerX,"press:",GestureEvent.press.position.x),t.elem.dispatchEvent(GestureEvent.press)},_handleUp:function(e,t){var a=this;a.debug&&trace("GestureBase._handleUp()"),window.removeEventListener("mouseup",a._handleUp),window.removeEventListener("touchend",a._handleTouchEnd),window.removeEventListener("mousemove",a._handleDragStart),window.removeEventListener("touchmove",a._handleTouchMove),window.removeEventListener("mousemove",a._handleDrag),window.removeEventListener("touchmove",a._handleTouchDrag),t!==!0&&(a.debug&&trace(" - dispatch GestureEvent.RELEASE"),a.elem.dispatchEvent(GestureEvent.release)),a._isDragging&&a._handleDragStop(e),a.elem.addEventListener("touchstart",a._handleTouchStart),a.elem.addEventListener("mousedown",a._handleDown),e.preventDefault(),a.debug&&trace("  _handleUp(), event.preventDefault(), kills second mousedown event")},_handleTouchStart:function(e){var t=this;t.debug&&trace("GestureBase._handleTouchStart()"),t._handleDown(e)},_handleTouchMove:function(e){var t=this;t.debug&&trace("GestureBase._handleTouchMove()"),t._handleDragStart(e)},_handleTouchDrag:function(e){var t=this;t.debug&&trace("GestureBase._handleTouchDrag()"),t._handleDrag(e)},_handleTouchEnd:function(e){var t=this;t.debug&&trace("GestureBase._handleTouchEnd()"),t._handleUp(e)},_getEventScope:function(e){return this.debug&&trace("GestureBase._getEventScope(), event:",e),"android"==Device.os&&e instanceof TouchEvent?e.changedTouches[0]:e},_handleSelectStopBubble:function(e){var t=this;t.debug&&trace("GestureBase._handleSelectStopBubble()"),t._isDrag&&(e.stopImmediatePropagation(),t.debug&&trace("Gesture : "+t.elem.id+" is Dragging, CLICK not fired"),t.elem.dispatchEvent(GestureEvent.finish))},finishPostStopBubble:function(e){var t=this;t.debug&&trace("GestureBase.finishPostStopBubble()"),t.elem.removeEventListener("touchstart",t._handleTouchStart),t.elem.removeEventListener("mousedown",t._handleDown),t._handleUp(e,!0)},_handleDragStart:function(e){var t=this;t.debug&&trace("GestureBase._handleDragStart()");var a=t._getEventScope(e),n=e.target.getBoundingClientRect(),i=a.pageX-n.left,r=a.pageY-n.top;t._xStart=t._xPrev=t._xPrev2=i,t._yStart=t._yPrev=t._yPrev2=r;var s=parseInt(t.elem.style.left.replace(/px/,""),10),o=parseInt(t.elem.style.top.replace(/px/,""),10);t._xOff=i-s,t._yOff=r-o,GestureEvent.dragStart.position.x=i,GestureEvent.dragStart.position.y=r,GestureEvent.dragStart.element.x=s,GestureEvent.dragStart.element.y=o,window.removeEventListener("mousemove",t._handleDragStart),window.removeEventListener("touchmove",t._handleTouchMove),window.addEventListener("mousemove",t._handleDrag),window.addEventListener("touchmove",t._handleTouchDrag)},_handleDrag:function(e){var t=this;t.debug&&trace("GestureBase._handleDrag()");var a=t._getEventScope(e),n=e.target.getBoundingClientRect(),i=a.pageX-n.left,r=a.pageY-n.top,s=i-t._xPrev,o=i-t._xPrev2;t._xVelocity=(o-s)/2+s;var l=r-t._yPrev,d=r-t._yPrev2;t._yVelocity=(d-l)/2+l,GestureEvent.drag.position.x=i,GestureEvent.drag.position.y=r,GestureEvent.drag.element.x=i-t._xOff,GestureEvent.drag.element.y=r-t._yOff,GestureEvent.drag.velocity.x=t._xVelocity,GestureEvent.drag.velocity.y=t._yVelocity,GestureEvent.drag.page.x=a.pageX,GestureEvent.drag.page.y=a.pageY,t._isDragging?t.elem.dispatchEvent(GestureEvent.drag):(Math.abs(t._xStart-i)>t._give||Math.abs(t._yStart-r)>t._give)&&(t._isDragging=!0,t._isDrag=!0,t.elem.dispatchEvent(GestureEvent.dragStart)),t._xPrev2=t._xPrev,t._xPrev=i,t._yPrev2=t._yPrev,t._yPrev=r},_handleDragStop:function(e){var t=this;t.debug&&trace("GestureBase._handleDragStop()"),t._isDragging=!1,GestureEvent.dragStop.position.x=t._xPrev,GestureEvent.dragStop.position.y=t._yPrev,GestureEvent.dragStop.velocity.x=t._xVelocity,GestureEvent.dragStop.velocity.y=t._yVelocity,t.elem.dispatchEvent(GestureEvent.dragStop),t._handleSwipe(e)},_handleSwipe:function(e){var t=this;t.debug&&trace("GestureBase._handleSwipe()"),GestureEvent.swipe.direction.x=t._xVelocity>0?"right":t._xVelocity<0?"left":null,GestureEvent.swipe.direction.y=t._yVelocity>0?"down":t._yVelocity<0?"up":null,GestureEvent.swipe.distance.x=t._xPrev-t._xStart,GestureEvent.swipe.distance.y=t._yPrev-t._yStart,GestureEvent.swipe.velocity.x=t._xVelocity,GestureEvent.swipe.velocity.y=t._yVelocity,t.elem.dispatchEvent(GestureEvent.swipe)}};var Matrix2D=function(){var e=this;e.identity=new Float32Array([1,0,0,0,1,0]),e.data=new Float32Array(e.identity)};Matrix2D.prototype={clear:function(){var e=this;e.data.set(e.identity)},rotate:function(e){var t=this,a=new Float32Array(t.identity),n=Math.cos(e).toFixed(15),i=Math.sin(e).toFixed(15);return a[0]=n,a[1]=i,a[3]=-i,a[4]=n,t.multiply(a),t},scale:function(e,t){var a=this,n=new Float32Array(a.identity);return n[0]=e,n[4]=t,a.multiply(n),a},skew:function(e,t){var a=this,n=new Float32Array(a.identity);return n[1]=Math.tan(e),n[3]=Math.tan(t),a.multiply(n),a},translate:function(e,t){var a=this,n=new Float32Array(a.identity);return n[2]=e||0,n[5]=t||0,a.multiply(n),a},multiply:function(e){for(var t=this,a=new Float32Array(t.data),n=0;6>n;n++){var i=3*Math.floor(n/3),r=n%3;t.data[n]=a[i]*e[r]+a[i+1]*e[r+3]}t.data[2]+=a[2],t.data[5]+=a[5]},setFromCss:function(e){var t=e.match(/\(([^\)]+)\)/)[1].replace(/\s/g,"").split(",").map(Number);this.data=[t[0],t[1],t[4],t[2],t[3],t[5]]},getCss:function(){var e=this;return"matrix("+e.data[0]+","+e.data[1]+","+e.data[3]+","+e.data[4]+","+e.data[2]+","+e.data[5]+")"}};var TextUtils=new function(){var e=this;e.autosizeTF=function(e,t){var a=void 0;a=e.id?Markup.getElement(e):e.textfield;var n=Markup.getParent(a);t=t||1;var i=void 0,r=void 0,s=Styles.getWidth(n);if(Styles.getWidth(a)>s)for(;Styles.getWidth(a)>s;)i=void 0===i?Styles.getCss(a,"font-size"):i-1,Styles.setCss(a,"font-size",i),r=i*t,Styles.setCss(a,"line-height",r);var o=Styles.getHeight(n);if(Styles.getHeight(a)>o)for(;Styles.getHeight(a)>o;)i=void 0===i?Styles.getCss(a,"font-size"):i-1,Styles.setCss(a,"font-size",i),r=i*t,Styles.setCss(a,"line-height",r);return Styles.getWidth(a)>s||Styles.getHeight(a)>o?void TextUtils.autosizeTF(a):i?i:Styles.getCss(a,"font-size")},e.fitContainerToText=function(e,t,a){Markup.getElement(e);if(t){var n=Styles.getWidth(e.textfield);Styles.setCss(e.parent,"width",n);var i=parseInt(n);Styles.setCss(e.container,"width",i)}if(a){var r=Styles.getHeight(e.textfield);Styles.setCss(e.parent,"height",r),Styles.setCss(e.container,"height",r)}},e.matchTeamNameSize=function(e,t){var a=TextUtils.autosizeTF(e),n=TextUtils.autosizeTF(t),i=a>n?n:a;Styles.setCss(e,{fontSize:i}),Align.moveX(Align.CENTER,e),Styles.setCss(t,{fontSize:i}),Align.moveX(Align.CENTER,t)},e.addText=function(e,t){var a="string"==typeof e?Markup.getElement(e):e;a.innerHTML=t},e.hasText=function(e){var t="string"==typeof e?Markup.getElement(e):e;return t.innerHTML.length>0},e.numlines=function(e){"string"==typeof e?Markup.getElement(e):e;return Styles.getCss(e,"height")/Styles.getCss(e,"line-height")},e.addSpaces=function(e){for(var t="",a=0;e>a;a++)t+="&nbsp;";return t},e.getSpecialCharacter=function(t,a){t=global.proxyStringToLowerCase.apply(t);for(var n=0;n<e.specialChars.length;n++){var i=global.proxyStringToLowerCase.apply(e.specialChars[n].label);if(i===t)return a?e.specialChars[n].upperCase:e.specialChars[n].lowerCase}return!1},e.specialCharacters=[{label:"iexcl",upperCase:"&#161;",lowerCase:"&#161;"},{label:"trademark",upperCase:"&#153;",lowerCase:"&#153;"},{label:"copyright",upperCase:"&#169;",lowerCase:"&#169;"},{label:"registered",upperCase:"&#174;",lowerCase:"&#174;"},{label:"nTilde",upperCase:"&#209;",lowerCase:"&#241;"},{label:"aAccent",upperCase:"&#193;",lowerCase:"&#225;"},{label:"eAccent",upperCase:"&#201;",lowerCase:"&#233;"},{label:"iAccent",upperCase:"&#205;",lowerCase:"&#237;"},{label:"oAccent",upperCase:"&#211;",lowerCase:"&#243;"},{label:"uAccent",upperCase:"&#218;",lowerCase:"&#250;"}],e.trimStartAndEnd=function(e){return e?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):""},e.removeSpaces=function(e){return e.split(" ").join("")},e.pad=function(e,t){var a="";for(0>e&&(a="-"),e=e.toString().replace(/\-/,"",e);e.length<t;)e="0"+e;return a+e}},CanvasDrawer=new function(){this.create=function(e){var t={left:0,top:0,width:e.css&&e.css.width?e.css.width:Styles.getCss(e.target,"width")||adParams.adWidth,height:e.css&&e.css.height?e.css.height:Styles.getCss(e.target,"height")||adParams.adHeight,background:e.debug===!0?"green":"",display:"inherit",position:"absolute",pointerEvents:"none"};if(e.css)for(var a in e.css)t[a]=e.css[a];return new CanvasDrawerStage("cd_"+e.id,e.target,t,e.styles||"",e.display!==!1,e.retina===!0?2:1)}},CanvasBlendMode=new function(){return{NONE:"source-over",UNDER:"destination-over",SOURCE_IN:"source-in",SOURCE_OUT:"source-out",SOURCE_ATOP:"source-atop",DEST_IN:"destination-in",DEST_OUT:"destination-out",DEST_ATOP:"destination-atop",XOR:"xor",COPY:"copy",ADD:"lighter",DARKEN:"darken",LIGHTEN:"lighten",OVERLAY:"overlay",MULTIPLY:"multiply",SCREEN:"screen",DODGE:"color-dodge",BURN:"color-burn",HARD:"hard-light",SOFT:"soft-light",DIFFERENCE:"difference",EXCLUSION:"exclusion",HUE:"hue",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"}},CanvasDrawType=new function(){return{IMAGE:"image",PATH:"path",RECT:"rect",TEXT:"text",CIRC:"arc",REPEAT:"repeat",REPEAT_X:"repeat-x",REPEAT_Y:"repeat-y",REPEAT_NONE:"no-repeat"}};CanvasDrawerStage.prototype={addImage:function(e){e.params=e.params||{};var t=this,a=t._getIsSourceCanvas(e.source),n=new CanvasDrawerElement(t,e,"image");return n.src=a?"CANVAS"===e.source.tagName?e.source:e.source.canvas:"IMG"===e.source.tagName?e.source:ImageManager.get(e.source),n.sourceX=e.params.sourceX||0,n.sourceY=e.params.sourceY||0,n.sourceW=e.params.sourceW||n.src.width,n.sourceH=e.params.sourceH||n.src.height,n.width=e.params.width||n.src.width/t.qualityScale,n.height=e.params.height||n.src.height/t.qualityScale,n.x=e.params.x||e.params.left||0,n.y=e.params.y||e.params.top||0,t.setTransformOrigin(n,e.transformOrigin||"50% 50%"),n},addShape:function(e){var t=this,a=new CanvasDrawerElement(t,e);return a.drawScale=e.drawScale||1,a.fill=e.fill,a.strokeFill=e.stroke.fill||null,a.strokeWidth=e.stroke.width||0,a.strokeCap=e.stroke.cap||"butt",a.strokeJoin=e.stroke.join||"miter",a.strokeDashSize=e.stroke.dashSize||1e4,a.strokeDashGap=e.stroke.dashGap||0,a.strokeDashOffset=e.stroke.dashOffset||0,a.strokePosition=e.stroke.position||"outer",0===a.strokeDashGap&&1e4!=a.strokeDashSize&&(a.strokeDashGap=a.strokeDashSize),t._setDrawArgs(a,e.params||[0,0,0,0,0],e),a},addText:function(e){e.params=e.css||{};var t=this,a=new CanvasDrawerElement(t,e,"text");a.copy=e.copy,a.maxWidth=e.params.maxWidth||null,a.fontFamily=e.params.fontFamily||"_serif",a.fontSize=e.params.fontSize>=0?Number(e.params.fontSize.toString().replace(/px/g,"").replace(/pt/g,"")):12,a.x=e.params.x||e.params.left||0,a.y=e.params.y||e.params.top||0,a.marginLeft=e.params.marginLeft||0,a.marginTop=e.params.marginTop||0,a.textAlign=e.params.textAlign||"left","centered"===a.textAlign&&(a.textAlign="center"),a.fill=e.fill,a.strokeFill=e.stroke.fill||null,a.strokeWidth=e.stroke.width||0,a.strokeJoin=e.stroke.join||"round",a.strokeDashSize=e.stroke.dashSize||1e4,a.strokeDashGap=e.stroke.dashGap||0,a.strokeDashOffset=e.stroke.dashOffset||0,a.strokePosition=e.stroke.position||"outer",0===a.strokeDashGap&&1e4!=a.strokeDashSize&&(a.strokeDashGap=a.strokeDashSize),a.transOffsetX=0,a.transOffsetY=0,a.lineHeight=e.params.lineHeight||.75*a.fontSize,a.maxWidth=e.params.maxWidth||1e5,a.deltaProps={fontFamily:"empty",fontSize:"empty",lineHeight:"empty",maxWidth:"empty",marginLeft:"empty",marginTop:"empty",strokeWidth:"empty",textAlign:"empty",transOffsetX:"empty",transOffsetY:"empty"},a.drawProps={drawX:"empty",drawY:"empty",offsetX:"empty",offsetY:"empty",strokeOffset:"empty",copy:"empty"},t.ctx.font=a.fontSize+"px "+a.fontFamily,t._wrapText(a,!1,!1);var n;switch(a.textAlign){case"left":n="0% 0%";break;case"right":n="0% 0%";break;case"center":n="50% 0%"}return t.setTransformOrigin(a,e.transformOrigin||n),t.ctx.font=null,a},setTransformOrigin:function(e,t){var a=this,n=t.split(" ")[0],i=t.split(" ")[1],r="string"==typeof e?a.elements[e]:e;switch(n=n.indexOf("%")>=0?+n.replace(/%/g,"")/100:n.indexOf("px")>=0?+n.replace(/px/g,"")/r.width:+n/r.width,i=i.indexOf("%")>=0?+i.replace(/%/g,"")/100:i.indexOf("px")>=0?+i.replace(/px/g,"")/r.height:+i/r.height,r._type){case"arc":case"path":n-=.5,i-=.5;default:r.offsetX=r.width*n,r.offsetY=r.height*i;break;case"text":switch(r.transOffsetX=n,r.transOffsetY=i,r.textAlign){case"center":r.transOffsetX-=.5;break;case"right":r.transOffsetX*=-1}a._wrapText(r,!1,!1)}},removeElement:function(e){var t=this;t.elementsLength--,e.id?delete t.elements[e.id]:delete t.elements[e]},removeAllItems:function(){var e=this;for(var t in e.elements)e.elementsLength--,delete e.elements[t];e.elementsLength=0},makeLinearGradient:function(e){for(var t=this,a=t.ctx.createLinearGradient(e.xStart,e.yStart,e.xEnd,e.yEnd),n=0;n<e.colors.length;n++)a.addColorStop(e.colors[n].stopVal,e.colors[n].color);return a},makeRadialGradient:function(e){for(var t=this,a=t.ctx.createRadialGradient(e.xInner,e.yInner,e.radiusInner,e.xOuter,e.yOuter,e.radiusOuter),n=0;n<e.colors.length;n++)a.addColorStop(e.colors[n].stopVal,e.colors[n].color);return a},makePattern:function(e){var t=this,a=e.source,n=e.repeat||"repeat",i=t._getIsSourceCanvas(a),r=i?"CANVAS"===a.tagName?a:a.canvas:"IMG"===a.tagName?a:ImageManager.get(a),s=t.ctx.createPattern(r,n);return s},update:function(){var e,t=this;t.ctx.clearRect(0,0,t.canvas.width,t.canvas.height);for(var a in t.elements)if(e=t.elements[a],e.isActive&&e.alpha>0){t.ctx.save();var n="arc"===e._type;t.ctx.globalAlpha=e.alpha,t.ctx.globalCompositeOperation=e.blendMode,e.rotation=e.rotation%360;var i=0!=e.rotation||1!=e.scaleX||1!=e.scaleY;if(i){var r=[(e.x+e.offsetX)*t.qualityScale,(e.y+e.offsetY)*t.qualityScale];t.ctx.translate.apply(t.ctx,r),0!=e.rotation&&t.ctx.rotate(MathUtils.toRadians(e.rotation)),1==e.scaleX&&1==e.scaleY||(0===e.scaleX&&(e.scaleX=1e-6),0===e.scaleY&&(e.scaleY=1e-6),t.ctx.scale(e.scaleX,e.scaleY))}t._drawShape(e,n,i),t.ctx.restore()}e=null},start:function(){var e=this;FrameRate.register(e,e.update)},stop:function(){var e=this;FrameRate.unregister(e,e.update)},_tweenEngine:function(e,t){var a,n,i=this;t[0]="string"==typeof t[0]?i.elements[t[0]]:t[0];for(var r=1;r<t.length;r++)if(t[r].transformOrigin){switch(n=r,e){case"set":case"from":case"to":case"fromTo":t[n].onStart&&(a=t[n].onStart),i._updateOnStart(t,n,a)}break}var s=TweenLite[e].apply(i,t).pause();i.allTweens["newTween"+i.allTweensSize++]=s,t[t.length-1].paused===!1&&i._tweenStart()},_updateOnStart:function(e,t,a){var n=this;e[t].onStart=function(){a&&a.apply(n,e[t].onStartParams||null),n.setTransformOrigin(e[0],e[t].transformOrigin);
}},_tweenStart:function(e){var t,a=this,n=0,i=e||[];for(var r in a.allTweens)a.allTweens[r].delay(a.allTweens[r].delay()+(i.delay||0)),t=a.allTweens[r].duration()+a.allTweens[r].delay(),t>n&&(n=t),a.allTweens[r].play();a.dummyTween&&(n>t&&(t=n),a.dummyTween.kill());var s,o,l=null;i.onStart&&(l=function(){i.onStart.apply(this,i.onStartParams?i.onStartParams:null)}),s=i.onUpdate?function(){i.onUpdate.apply(this,i.onUpdateParams?i.onUpdateParams:null),a.update()}:a.update.bind(a),o=i.onComplete?function(){a._tweenKill(),i.onComplete.apply(this,i.onCompleteParams?i.onCompleteParams:null)}:a._tweenKill.bind(a),n+=i.timePadding&&i.timePadding>0?i.timePadding:0,a.dummyTween=TweenLite.to({},n,{onStart:l,onUpdate:s,onComplete:o,delay:i.delay||0})},_tweenKill:function(){var e=this;for(var t in e.allTweens)e.allTweens[t]&&e.allTweens[t].kill(),delete e.allTweens[t];e.allTweens={},e.allTweensSize=0,e.dummyTween&&e.dummyTween.kill(),e.dummyTween=null},_drawShape:function(e,t,a){var n=this;if(e.shadowColor&&(e.shadowBlur>0||0!=e.shadowDistance)&&(n.ctx.shadowColor=e.shadowColor,n.ctx.shadowOffsetX=e._shadowOffsetX*n.qualityScale,n.ctx.shadowOffsetY=e._shadowOffsetY*n.qualityScale,n.ctx.shadowBlur=e.shadowBlur*n.qualityScale),"image"===e._type)try{a?n.ctx.drawImage(e.src,e.sourceX,e.sourceY,e.sourceW,e.sourceH,-e.offsetX*n.qualityScale,-e.offsetY*n.qualityScale,e.width*n.qualityScale,e.height*n.qualityScale):n.ctx.drawImage(e.src,e.sourceX,e.sourceY,e.sourceW,e.sourceH,e.x*n.qualityScale,e.y*n.qualityScale,e.width*n.qualityScale,e.height*n.qualityScale)}catch(t){console.log(""),trace("ERROR: Source for CanvasDrawerStage: '"+n.canvas.id+"' element: '"+e.id+"' failed to load; the image source of "+e.src+" may not be named or loaded properly."),console.log("")}else if("text"===e._type)n._wrapText(e,a);else{e.strokeDashSize>0&&e.strokeDashGap>0&&n.ctx.setLineDash([e.strokeDashSize*n.qualityScale,e.strokeDashGap*n.qualityScale]),n.ctx.lineDashOffset=e.strokeDashOffset;var i="outer"===e.strokePosition,r=e.strokeWidth>0;if(n.ctx.beginPath(),n.ctx.strokeStyle=e.strokeFill,n.ctx.lineWidth=e.strokeWidth*n.qualityScale*(i?2:1),n.ctx.lineCap=e.strokeCap,n.ctx.lineJoin=e.strokeJoin,"path"===e._type){var s,o;for(s=0;s<e.args.length;s++)for(o=0;o<e.args[s].points.length;o+=2)a?(e.drawArgs[s].points[o]=(e.args[s].points[o]*e.drawScale-e.offsetX)*n.qualityScale,e.drawArgs[s].points[o+1]=(e.args[s].points[o+1]*e.drawScale-e.offsetY)*n.qualityScale):(e.drawArgs[s].points[o]=(e.args[s].points[o]*e.drawScale+e.x)*n.qualityScale,e.drawArgs[s].points[o+1]=(e.args[s].points[o+1]*e.drawScale+e.y)*n.qualityScale);for(s=0;s<e.drawArgs.length;s++)n.ctx[e.drawArgs[s].fun].apply(n.ctx,e.drawArgs[s].points)}else a?(e.args[0]=-e.offsetX*n.qualityScale,e.args[1]=-e.offsetY*n.qualityScale):(e.args[0]=e.x*n.qualityScale,e.args[1]=e.y*n.qualityScale),t?e.args[2]=e.width/2*n.qualityScale:(e.args[2]=e.width*n.qualityScale,e.args[3]=e.height*n.qualityScale),t&&e.args[2]<0&&(e.args[2]=0),n.ctx[e._type].apply(n.ctx,e.args);n.ctx.closePath(),i&&r&&n.ctx.stroke(),e.fill&&(n.ctx.fillStyle=e.fill,n.ctx.fill()),!i&&r&&(n.ctx.shadowColor="rgba(0, 0, 0, 0)",n.ctx.shadowOffsetX=0,n.ctx.shadowOffsetY=0,n.ctx.shadowBlur=0,n.ctx.stroke())}},_setLineDrawArgs:function(e,t){if(t)e.drawArgs[t]={fun:e.args[t].fun,points:e.args[t].points.slice()};else for(var a=0;a<e.args.length;a++)e.drawArgs[a]={fun:e.args[a].fun,points:e.args[a].points.slice()}},_setDrawArgs:function(e,t,a){var n=this;switch(e._type){case"rect":t=[t.x||t.left||0,t.y||t.top||0,t.width,t.height];break;case"arc":var i=void 0===t.startAngle?t.startRad:MathUtils.toRadians(t.startAngle),r=void 0===t.endAngle?t.endRad:MathUtils.toRadians(t.endAngle);i||(i=0),r||(r=2*Math.PI),t=[t.x||t.left||0,t.y||t.top||0,t.width>=0?t.width/2:t.radius,i,r]}switch(e.args=t,a=a||{},e._type){case"rect":e.x=t[0],e.y=t[1],e.width=t[2],e.height=t[3];break;case"arc":e.x=t[0],e.y=t[1],e.width=e.height=2*t[2];break;case"path":e.width=0,e.height=0,e.args=t.points,e.drawArgs=e.args.slice(),e.offsetX=1e8,e.offsetY=1e8;var s,o;for(s=0;s<e.args.length;s++)for(o=0;o<e.args[s].points.length;o+=2)e.args[s].points[o]<e.offsetX?e.offsetX=e.args[s].points[o]:e.args[s].points[o]>e.width&&(e.width=e.args[s].points[o]),e.args[s].points[o+1]<e.offsetY?e.offsetY=e.args[s].points[o+1]:e.args[s].points[o+1]>e.height&&(e.height=e.args[s].points[o+1]);for(e.width=e.width-e.offsetX,e.height=e.height-e.offsetY,s=0;s<e.args.length;s++){for(o=0;o<e.args[s].points.length;o+=2)e.args[s].points[o]-=e.offsetX+e.width/2,e.args[s].points[o+1]-=e.offsetY+e.height/2;n._setLineDrawArgs(e,s)}e.x=a.params.x>=0||a.params.x<=0?a.params.x:e.offsetX+e.width/2,e.y=a.params.y>=0||a.params.y<=0?a.params.y:e.offsetY+e.height/2}n.setTransformOrigin(e,a.transformOrigin||("rect"===e._type?"0 0":"50% 50%"))},_getIsSourceCanvas:function(e){return"CANVAS"===e.tagName||"object"==typeof e&&void 0===e.tagName},_wrapText:function(e,t,a){var n=this,i=a===!1,r="empty";if(!i)for(var s in e.deltaProps)if(e.deltaProps[s]!=e[s]){r=s,i=!0;break}if(i){e.deltaProps.strokeOffset=("outer"===e.strokePosition||"center"===e.strokePosition?e.strokeWidth/4:0)*n.qualityScale,e.drawProps.offsetX=e.marginLeft+("right"===e.textAlign?-1:1)*e.deltaProps.strokeOffset,e.drawProps.offsetY=e.marginTop+e.deltaProps.strokeOffset;for(var o,l,d=e.copy.split(" "),u="",c=0,h=[],g=0;g<d.length;g++)o=u+d[g]+" ",l=n.ctx.measureText(o).width,l>e.maxWidth&&g>0?(l=n.ctx.measureText(u).width,l>c&&(c=l),h.push({copy:u,y:e.drawProps.offsetY}),u=d[g]+" ",e.drawProps.offsetY+=e.lineHeight):(u=o,l>c&&(c=l));h.push({copy:u,y:e.drawProps.offsetY}),e.width=c+2*e.deltaProps.strokeOffset,e.height=e.drawProps.offsetY+2*e.deltaProps.strokeOffset,e.offsetX=e.width*e.transOffsetX,e.offsetY=e.height*e.transOffsetY;for(s in e.deltaProps)e.deltaProps[s]=e[s];e.drawProps.copy=h.slice()}if(a!==!1){var m=-e.drawProps.offsetX,f=0;_drawX=e.x,_drawY=e.y,t&&(m=e.offsetX+e.strokeWidth/2,f=e.offsetY,_drawX=0,_drawY=0);var p;for(g=0;g<e.drawProps.copy.length;g++)p=e.drawProps.copy[g].copy,p.lastIndexOf(" ")===p.length-1&&(p=p.substring(0,p.length-1)),n._drawText(e,p,_drawX-m,_drawY+e.drawProps.copy[g].y-f)}},_drawText:function(e,t,a,n){var i=this,r="outer"===e.strokePosition,s=e.strokeWidth>0;e.strokeDashSize>0&&e.strokeDashGap>0&&i.ctx.setLineDash([e.strokeDashSize*i.qualityScale,e.strokeDashSize*i.qualityScale]),i.ctx.lineDashOffset=e.strokeDashOffset,i.ctx.lineJoin=e.strokeJoin,i.ctx.font=e.fontSize*i.qualityScale+"px "+e.fontFamily,i.ctx.fillStyle=e.fill,i.ctx.strokeStyle=e.strokeFill,i.ctx.textAlign=e.textAlign,i.ctx.textBaseline="top",i.ctx.lineWidth=e.strokeWidth*i.qualityScale*(r?2:1),r&&s&&i.ctx.strokeText(t,a*i.qualityScale,n*i.qualityScale),i.ctx.fillText(t,a*i.qualityScale,n*i.qualityScale),!r&&s&&(i.ctx.shadowColor="rgba(0, 0, 0, 0)",i.ctx.shadowOffsetX=0,i.ctx.shadowOffsetY=0,i.ctx.shadowBlur=0,i.ctx.strokeText(t,a*i.qualityScale,n*i.qualityScale))}},CanvasDrawerElement.prototype={init:function(){var e=this;Object.defineProperties(e,{left:{get:function(){return e.x},set:function(t){e.x=t}},top:{get:function(){return e.y},set:function(t){e.y=t}},opacity:{get:function(){return e.alpha},set:function(t){e.alpha=t}},shadowAngle:{get:function(){return e._shadowAngle},set:function(t){e._shadowAngle=t,e._setOffsetPos()}},shadowDistance:{get:function(){return e._shadowDistance},set:function(t){e._shadowDistance=t,e._setOffsetPos()}},shadowColor:{get:function(){return e._shadowColor},set:function(t){e._shadowColor=null===t?null:ColorUtils.toRgba(t,e._shadowAlpha)}},shadowAlpha:{get:function(){return e._shadowAlpha},set:function(t){e._shadowAlpha=t,e.shadowColor=e._shadowColor}}})},_setOffsetPos:function(e,t){var a=this,n=MathUtils.toRadians(-1*a._shadowAngle+180);a._shadowOffsetX=(Math.cos(n)*a._shadowDistance).toFixed(8),a._shadowOffsetY=(Math.sin(n)*a._shadowDistance).toFixed(8)},toString:function(){return"[object CanvasDrawerElement]"}};var MathUtils=function(){function e(e){return Math.PI/180*e}function t(e){return 180/Math.PI*e}function a(e,t,a){t=t||0,a=void 0!=a&&a>0?a:1;var n=Math.min(e,t),i=Math.max(e,t);n=Math.ceil(n/a)*a,i=Math.floor(i/a)*a;var r=n+Math.floor(Math.random()*((i-n+a)/a))/(1/a);return r}function n(e){return e=e||.5,Math.random()<e}function i(e,t,a,n,i){return(i-a)/(n-a)*(t-e)+e}function r(e,t,a){var n=Math.min(t,a),i=Math.max(t,a);return i>=e&&e>=n}function s(e){return!isNaN(e)}function o(e){return+e}function l(e,t,a){return Math.max(t,Math.min(a,e))}function d(e,t,a,n){var e=e+Math.cos(n)*a,t=t+Math.sin(n)*a;return[e,t]}function u(e,t,a,n){return a=a||0,n=n||0,Math.atan2(n-t,a-e)}function c(e,t,a,n){return a=a||0,n=n||0,Math.sqrt((n-t)*(n-t)+(a-e)*(a-e))}return{toRadians:e,toDegrees:t,random:a,randomBoolean:n,rel:i,inRange:r,isNumber:s,toNumber:o,restrict:l,getAnglePoint:d,getAngle:u,getDistance:c}}(),ColorUtils=new function(){var e=this;e.toRgba=function(e,t){switch(typeof e){case"object":e=e||{r:0,g:0,b:0,a:1};break;default:if(e.indexOf("rgb")>=0)e=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/),e={r:e[0],g:e[1],b:e[2],a:e[3]};else{if(!(e.indexOf("#")>=0))return console.log(""),trace("ERROR: ColorUtils.toRgba does not accept color names such as '"+e+"'. Use HEX or an RGB/A string or object per documentation"),trace("Returning the color '"+e+"' without any alpha"),console.log(""),e;var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);e=a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16),a:a[4]?parseInt(a[4],16):1}:null}}return e.a||(e.a=1),t>=0&&(e.a=t),"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"}},PrepareCommon=new function(){var e,t,a=this;a.init=function(n){trace("PrepareCommon.init()"),t=n,e=new Async,e.onComplete(a.initComplete),global.ftData=new FtData,e.start()},a.initComplete=function(){trace("PrepareCommon.initComplete()"),a.prepareAdData(),a.loadImageQueue()},a.prepareAdData=function(){trace("PrepareCommon.prepareAdData()"),global.adData=new AdData(global.adParams.currentJsonData)},a.loadImageQueue=function(){trace("PrepareCommon.loadImageQueue()"),ImageManager.load(a.onLoadAllImagesComplete)},a.onLoadAllImagesComplete=function(){trace("PrepareCommon.onLoadAllImagesComplete()"),t()}},EdgeData=function(e){var t=this;e=e||{},t.getMaskCssFor=function(e){return"-webkit-clip-path: "+t.convertMaskShapeToMaskCss(t.getMaskShapeBy(e).update())},t.getMaskShapeBy=function(e){for(var t in maskShapes)if(t==e)return maskShapes[t]},t.convertMaskShapeToMaskCss=function(e){for(var t="polygon( ",a=0;a<e.length;a++)t+=String(e[a][0])+"px "+String(e[a][1])+"px, ";return t.slice(0,t.length-2)+" )"}},Endframe=function(){function e(){var e=40,t=.5,n=Expo.easeIn,i=0;a.endframeCTA.unregisterEvents(),Styles.setCss(a.container,"display","inherit"),a.gallery.hide(),a.replay.hide({animationTime:t,delay:i,destX:e,easeFunc:n}),i+=.1,TweenLite.to(a.resultText1.container,t,{delay:i,opacity:0,x:e,ease:n}),i+=.1,TweenLite.to(a.endframeOnHulu.container,t,{delay:i,opacity:0,x:e,ease:n}),i+=.1,TweenLite.to(a.endframeCTA.container,t,{delay:i,opacity:0,x:e,ease:n,onComplete:function(){Styles.setCss(a.container,"display","none"),a.resetCallback()}})}function t(){}var a=this;return a.container,a.resultText1,a.endframeOnHulu,a.gallery,a.endframeCTA,a.replay,a.callback,a.resetCallback,a.build=function(n){var i=n.target||adData.elements.redAdContainer,r=n.width||adParams.adWidth,s=n.height||adParams.adHeight;a.callback=n.callback||t,a.resetCallback=n.resetCallback||t;var o=90;a.container=new UIComponent({id:"endframe",target:i,css:{width:r,height:s,position:"absolute",backgroundColor:adData.greyColor}});var l=adData.resultText(1),d=0;adData.endframeHeadline.length>0&&(l=adData.endframeHeadline,d=2);var u=new UIComponent({id:"endframe_header_container",target:a.container,css:{width:r,height:o,position:"absolute"}});a.resultText1=Markup.addTextfield({id:"endframe_resultText1_TF",target:u,css:{width:700,height:s,top:22},margin:5,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: 34px; line-height: 30px; letter-spacing: "+d+"px; font-family: "+adData.secondaryFont+"; text-align: center;"},l,!1,!1),a.endframeOnHulu=Markup.addTextfield({id:"endframeOnHulu_TF",target:a.container,css:{width:r,height:s,top:67},margin:5,multiline:!1,textStyles:"color: "+adData.huluColors.primaryGreen+"; font-size: 13px; line-height: 13px; font-family: "+adData.tertiaryFont+"; text-align: center;"},adData.endframeOnHulu,!1,!1),TextUtils.autosizeTF(a.endframeOnHulu.textfield),TextUtils.fitContainerToText(a.endframeOnHulu,!0,!0),Align.moveX(Align.CENTER,a.endframeOnHulu.container),Gesture.disable(a.container),a.gallery=new Gallery,a.gallery.build({target:a.container,width:r,height:s,top:o}),a.endframeCTA=new EndframeCtaBTN,a.endframeCTA.build({target:a.container,width:360,height:22,fontSize:24,multiline:!1,callback:function(){trace("Endframe.build() endframeCTA.CLICK"),adData.networkExit(clickTag)}}),a.endframeCTA.unregisterEvents(),Align.moveX(Align.CENTER,a.endframeCTA.container),Align.moveY(Align.BOTTOM,a.endframeCTA.container,-11),a.replay=new ReplayBTN,a.replay.build({target:u,width:100,height:ImageManager.get("replay").height,fontSize:14,lineHeight:12,letterSpacing:1,callback:e}),Align.move(Align.TOP_RIGHT,a.replay.container,-34,26),Styles.setCss(a.container,"display","none")},a.show=function(){var e=-40,t=.5,n=Quad.easeOut,i=0;a.endframeCTA.registerEvents(),Styles.setCss(a.container,"display","inherit");var r=adData.resultText(1),s=0;adData.endframeHeadline.length>0&&(r=adData.endframeHeadline,s=2),Styles.setCss(a.resultText1.textfield,"letter-spacing",s),TextUtils.addText(a.resultText1.textfield,r),TextUtils.autosizeTF(a.resultText1.textfield,Styles.getCss(a.resultText1.textfield,"font-size")/Styles.getCss(a.resultText1.textfield,"line-height")),TextUtils.fitContainerToText(a.resultText1,!0,!0),Align.moveX(Align.CENTER,a.resultText1.container,-2),adData.endframeOnHulu.length<1&&Align.moveY(Align.CENTER,a.resultText1.container),a.replay.show({animationTime:t,startX:e,delay:i,easeFunc:n}),i+=.1,TweenLite.fromTo(a.resultText1.container,t,{opacity:0,x:e},{delay:i,opacity:1,x:0,ease:n}),i+=.1,TweenLite.fromTo(a.endframeOnHulu.container,t,{opacity:0,x:e},{delay:i,opacity:1,x:0,ease:n}),i+=.1,TweenLite.fromTo(a.endframeCTA.container,t,{opacity:0,x:e},{delay:i,opacity:1,x:0,ease:n}),a.gallery.show({animationTime:t,startX:e,delay:i})},a},Intro=function(){function e(){if(a.showing)if(a.imageQueue.length>0){var t=a.imageQueue.shift();TweenLite.to(t,1,{delay:a.delay,opacity:1,ease:Quad.easeInOut,onComplete:function(){TweenLite.delayedCall(.5,e)}})}else TweenLite.delayedCall(a.delay,a.callback)}function t(){}var a=this;return a.container,a.images,a.imageQueue,a.btn,a.introText1,a.introText2,a.delay=.1,a.showing=!0,a.callback,a.build=function(e){var n=e.target||adData.elements.redAdContainer,i=e.fontSize||38,r=e.lineHeight||i,s=e.textWidth||580,o=e.textHeight||50,l=e.margin||0,d=e.multiline||!1,u=e.spacer||10;a.callback=e.callback||t,a.container=new UIComponent({id:"intro",target:n,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute"}}),Gesture.disable(a.container);var c=UIComponent({id:"introImagesContainer",target:a.container,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute"}});a.images=[];for(var h,g=adData.totalIntroImages;g>0;g--)h=new UIImage({id:"introImage_"+g,target:c,source:adData.questions[g].image,css:{position:"absolute",backgroundSize:"contain"}}),Align.moveX(Align.CENTER,h),TweenLite.set(h,{scale:3}),g<adData.totalIntroImages&&(TweenLite.set(h,{opacity:0}),a.images.push(h));a.imageQueue=a.images.slice();var m=(new UIImage({id:"introGradient",target:a.container,source:"introGradient",css:{}}),UIComponent({id:"introContentContainer",target:a.container,css:{width:s,height:adParams.adHeight,position:"absolute"}})),f=0,p=a.introText1=Markup.addTextfield({id:"introText1",target:m,css:{width:s,height:o},margin:l,multiline:d,textStyles:"color: "+adData.whiteColor+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.primaryFont+"; text-align: center;"},adData.introText1,!1,!1);TextUtils.autosizeTF(p.textfield),Align.moveX(Align.CENTER,p.textfield),f+=Styles.getCss(p.textfield,"height")+u;var w=a.introText2=Markup.addTextfield({id:"introText2",target:m,css:{width:s,height:o,top:f},margin:l,multiline:d,textStyles:"color: "+adData.whiteColor+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.primaryFont+"; text-align: center;"},adData.introText2,!1,!1);TextUtils.autosizeTF(w.textfield),Align.moveX(Align.CENTER,w.textfield),f+=Styles.getCss(w.textfield,"height")+u;var A=a.btn=new ActionBTN;A.build({id:"intro",target:m,copy:adData.startCTA,top:f,isCorrect:!0,callback:a.callback}),TweenLite.set(A.container,{opacity:0}),Align.moveX(Align.CENTER,A.container),Gesture.disable(m),f+=A.height,Styles.setCss(m,"height",f),Align.move(Align.CENTER,m),a.container.hide()},a.show=function(){a.container.show();var t=-40,n=.5;TweenLite.from(a.introText1.container,n,{delay:.1,x:t,ease:Quad.easeOut}),TweenLite.from(a.introText2.container,n,{delay:.2,x:t,ease:Quad.easeOut}),a.btn.simpleShow(),TweenLite.fromTo(a.btn.container,n,{x:t,opacity:0},{delay:.3,x:0,opacity:1,ease:Quad.easeOut}),TweenLite.delayedCall(2,a.btn.blink),TweenLite.delayedCall(1,e)},a.hide=function(){a.showing&&(a.showing=!1,TweenLite.killDelayedCallsTo(a.callback),TweenLite.fromTo(a.container,.5,{clip:"rect(0px "+adParams.adWidth+"px "+adParams.adHeight+"px 0px)"},{delay:.35,clip:"rect(0px "+adParams.adWidth+"px "+adParams.adHeight+"px "+adParams.adWidth+"px)",ease:Quad.easeInOut,onComplete:function(){Styles.setCss(a.container,"display","none")}}))},a},Quiz=function(){function e(){Gesture.disable(o.startBTN.container),o.startBTN.hide(),TweenLite.delayedCall(.25,function(){o.startBTN.updateText(adData.continueCTA)}),o.question.resetAnswers(),o.timer.reset(),TweenLite.to(o.getReadyTF.container,.25,{opacity:1,ease:Quad.easeInOut}),TweenLite.to(o.countdown,.25,{opacity:1,ease:Quad.easeInOut}),t()}function t(){TweenLite.fromTo(o.countdownTF.container,.5,{scale:3,opacity:0},{scale:1,opacity:1,ease:Expo.easeIn,onComplete:function(){TweenLite.to(o.countdownTF.container,.5,{scale:.2,opacity:0,ease:Expo.easeIn,onComplete:function(){o.countdownTime--,o.countdownTime<1?a():(1==o.countdownTime&&TweenLite.set(o.countdownTF.container,{x:1}),TextUtils.addText(o.countdownTF.textfield,o.countdownTime.toString()),t())}})}})}function a(){TweenLite.to(o.getReadyTF.container,.25,{opacity:0,ease:Quad.easeInOut}),TweenLite.to(o.countdown,.25,{opacity:0,ease:Quad.easeInOut}),o.question.show(),o.question.replay(),o.timer.replay()}function n(){o.question&&o.question.hide(),o.callback()}function i(e){e&&adData.score++,o.timer.resolve(e)}function r(e){o.questionsQueue.length>0?(o.question&&o.question.hide(),o.question=o.questionsQueue.shift(),o.question.show(),e||TweenLite.delayedCall(1,function(){o.timer.timerAnimation(o.question.id),o.question.timerAnimation()}),TextUtils.addText(o.questionMarker.textfield,o.question.id+"/"+adData.questions.length),TextUtils.addText(o.subHeaderTF.textfield,o.question.question)):TweenLite.delayedCall(.2,n)}function s(){}var o=this;return o.container,o.questions,o.questionsQueue,o.cta,o.questionMarker,o.question,o.gradient,o.headerTF,o.quizCTA,o.callback,o.countdownTime=3,o.markerWidth,o.markerHeight,o.build=function(t){var a=t.target||adData.elements.redAdContainer,n=t.quizWidth||444;o.callback=t.callback||s,o.container=new UIComponent({id:"quiz",target:a,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute",backgroundColor:adData.greyColor}}),Gesture.disable(o.container);var l=UIComponent({id:"questionsContainer",target:o.container,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute"}});o.questions=[];var d;t.question.target=l,t.question.callback=r,t.question.quizWidth=n;for(var u=0;u<adData.questions.length;u++)d=new QuizQuestion,t.question.id=u+1,t.question.onAnswered=i,d.build(t.question),o.questions.push(d);o.questionsQueue=o.questions.slice(),o.startBTN=new ActionBTN,o.startBTN.build({id:"quizStartBTN",target:l,copy:adData.startCTA,isCorrect:!0,left:124,top:117,callback:e,fillShowing:1}),TweenLite.set(o.startBTN.container,{scale:1.3}),Gesture.disable(o.startBTN.container);var c=110;o.getReadyTF=Markup.addTextfield({id:"quiz_getReadyTF",target:o.container,css:{width:n,height:t.header.height,top:c,opacity:0},margin:5,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: 15px; line-height: 15px; font-family: "+adData.primaryFont+"; text-align: center;"},adData.getReady,!1,!1),TextUtils.autosizeTF(o.getReadyTF.textfield),Align.moveX(Align.CENTER,o.getReadyTF.textfield);var h=54;o.countdown=new UIComponent({id:"quiz_countdown",target:o.container,css:{width:n,height:h,position:"absolute",top:c+25,opacity:0}});var g=new UIImage({id:"quiz_contdownCircle",target:o.countdown,source:"circle",css:{width:h,height:h}});o.countdownTF=Markup.addTextfield({id:"quiz_countdownTF",target:g,css:{width:h,height:h},margin:0,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: 34px; line-height: 30px; font-family: "+adData.primaryFont+"; text-align: center;"},o.countdownTime.toString(),!1,!1),Align.move(Align.CENTER,o.countdownTF.textfield,0,2),Align.moveX(Align.CENTER,g),o.headerTF=Markup.addTextfield({id:"quiz_headerTF",target:o.container,css:{width:n,height:t.header.height,top:t.header.top},margin:10,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: "+t.header.fontSize+"px; line-height: "+t.header.lineHeight+"px; font-family: "+adData.primaryFont+"; text-align: center;"},adData.quizHeader,!1,!1),TextUtils.autosizeTF(o.headerTF.textfield),Align.moveX(Align.CENTER,o.headerTF.textfield),o.subHeaderTF=Markup.addTextfield({id:"quiz_subHeaderTF",target:o.container,css:{width:n,height:t.header.height,top:t.header.top+Styles.getCss(o.headerTF.textfield,"height")+8},margin:5,multiline:!1,textStyles:"color: "+adData.huluColors.primaryGreen+"; font-size: 18px; line-height: 18px; font-family: "+adData.quaternaryFont+"; text-align: center;"},adData.questions[0].question,!1,!1),TextUtils.autosizeTF(o.subHeaderTF.textfield),Align.moveX(Align.CENTER,o.subHeaderTF.textfield),o.quizCTA=new QuizCtaBTN,o.quizCTA.build({target:o.container,width:240,height:25,fontSize:18,callback:function(){adData.networkExit(clickTag)}}),Align.move(Align.BOTTOM_RIGHT,o.quizCTA.container,-534,0);var m=6,f=n+m-1;o.gradient=new UIImage({id:"quizGradient",target:o.container,source:"quizHeroGradient",css:{left:f,width:adParams.adWidth-f,height:adParams.adHeight,position:"absolute"}}),TweenLite.set(o.gradient,{x:-o.gradient.width,clip:"rect(0px "+o.gradient.width+"px "+o.gradient.height+"px "+o.gradient.width+"px)"}),o.timer=new Timer,o.timer.build({width:m,left:n,target:o.container}),o.markerWidth=t.marker.width,o.markerHeight=t.marker.height,o.questionMarker=new Markup.addTextfield({id:"quiz_marker",target:o.container,css:{width:o.markerWidth,height:o.markerHeight,top:t.marker.top,left:f+t.marker.leftOffset},margin:0,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: "+t.marker.fontSize+"px; line-height: "+t.marker.lineHeight+"px; font-family: "+adData.primaryFont+"; text-align: right;"},"1/"+adData.questions.length,!1,!1),TweenLite.set(o.questionMarker.container,{x:-o.markerWidth,clip:"rect(0px "+o.markerWidth+"px "+o.markerHeight+"px "+o.markerWidth+"px)"})},o.reset=function(){adData.score=0,o.questionsQueue=o.questions.slice();for(var e=0;e<o.questionsQueue.length;e++)o.questionsQueue[e].reset();o.timer.resetAll()},o.pause=function(t){trace("Quiz.pause()"),trace("		adData.userInteracted:"+adData.userInteracted),trace("		forcePause:"+t),o.countdownTime=3,TextUtils.addText(o.countdownTF.textfield,o.countdownTime.toString()),adData.userInteracted&&!t||(o.question.pause(),o.timer.pause(),Gesture.enable(o.startBTN.container),t?e():o.startBTN.show()),adData.autoplay=!0},o.show=function(){var e=1,t=2,a=-40;Styles.setCss(o.container,"display","inherit"),adData.autoplay?(TweenLite.delayedCall(e,o.timer.show),TweenLite.fromTo(o.headerTF.container,e,{opcacity:0,x:a},{opcacity:1,x:0,ease:Quad.easeOut}),TweenLite.fromTo(o.subHeaderTF.container,e,{opacity:0,x:a},{delay:.2,opacity:1,x:0,ease:Quad.easeOut}),TweenLite.fromTo(o.quizCTA.container,e,{opacity:0,x:a},{delay:.4,opacity:1,x:0,ease:Quad.easeOut}),TweenLite.fromTo(o.gradient,e,{x:-o.gradient.width,clip:"rect(0px "+o.gradient.width+"px "+o.gradient.height+"px "+o.gradient.width+"px)"},{delay:e,x:0,clip:"rect(0px "+o.gradient.width+"px "+o.gradient.height+"px 0px)",ease:Quad.easeInOut}),TweenLite.fromTo(o.questionMarker.container,e,{x:-o.markerWidth,clip:"rect(0px "+o.markerWidth+"px "+o.markerHeight+"px "+o.markerWidth+"px)"},{delay:e,x:0,clip:"rect(0px "+Styles.getCss(o.questionMarker.container,"width")+"px "+Styles.getCss(o.questionMarker.container,"height")+"px 0px)",ease:Quad.easeInOut}),adData.userInteracted?TweenLite.delayedCall(t,function(){o.question=o.questionsQueue.shift(),TextUtils.addText(o.questionMarker.textfield,o.question.id+"/"+adData.questions.length),TextUtils.addText(o.subHeaderTF.textfield,o.question.question),o.pause(!0)}):(TweenLite.delayedCall(t,r),TweenLite.delayedCall(.4*adData.questionTime+t+1,o.pause))):(o.timer.show(),TweenLite.set(o.headerTF.container,{opcacity:1,x:0}),TweenLite.set(o.subHeaderTF.container,{opacity:1,x:0}),TweenLite.set(o.quizCTA.container,{opacity:1,x:0}),TweenLite.set(o.gradient,{x:0,clip:"rect(0px "+o.gradient.width+"px "+o.gradient.height+"px 0px)"}),TweenLite.set(o.questionMarker.container,{x:0,clip:"rect(0px "+Styles.getCss(o.questionMarker.container,"width")+"px "+Styles.getCss(o.questionMarker.container,"height")+"px 0px)"}),r(!0),TweenLite.delayedCall(.01,o.pause))},o.hide=function(){Styles.setCss(o.container,"display","none")},o},Results=function(){function e(){var e=40,t=.5,n=Expo.easeIn,i=0;TweenLite.to(a.score.container,t,{delay:i,x:e,opacity:0,ease:n}),i+=.1,TweenLite.to(a.resultText1.container,t,{delay:i,x:e,opacity:0,ease:n}),i+=.1,TweenLite.to(a.resultText2.container,t,{delay:i,x:e,opacity:0,ease:n,onComplete:function(){Styles.setCss(a.container,"display","none"),a.callback()}})}function t(){}var a=this;return a.container,a.contentContainer,a.score,a.resultText1,a.resultText2,a.showCallback,a.fontSize,a.build=function(e){var n=e.target||adData.elements.redAdContainer,i=e.width||adParams.adWidth,r=e.height||adParams.adHeight;a.fontSize=e.fontSize||34;var s=e.lineHeight||a.fontSize;a.callback=e.callback||t,a.showCallback=e.showCallback||t,a.container=new UIComponent({id:"results",target:n,css:{width:i,height:r,position:"absolute",backgroundColor:adData.greyColor}}),a.contentContainer=new UIComponent({id:"results_content_container",target:a.container,css:{width:i,height:r,position:"absolute"}}),a.score=Markup.addTextfield({id:"score_TF",target:a.contentContainer,css:{width:i,height:r},margin:5,multiline:!1,textStyles:"color: "+adData.huluColors.primaryGreen+"; font-size: 30px; line-height: 30px; font-family: "+adData.primaryFont+"; text-align: center;"},adData.score+"/"+adData.questions.length,!1,!1),a.resultText1=Markup.addTextfield({id:"resultText1_TF",target:a.contentContainer,css:{width:i,height:r},margin:5,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: "+a.fontSize+"px; line-height: "+s+"px; font-family: "+adData.secondaryFont+"; text-align: center;"},adData.resultText(1),!1,!1),a.resultText2=Markup.addTextfield({id:"resultText2_TF",target:a.contentContainer,css:{width:i,height:r},margin:5,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: "+a.fontSize+"px; line-height: "+s+"px; font-family: "+adData.primaryFont+"; text-align: center;"},adData.resultText(2),!1,!1),Gesture.disable(a.container),TweenLite.set(a.container,{display:"none",clip:"rect(0px 0px "+r+"px 0px)"})},a.show=function(){trace("Results.show()");var t=-40,n=.5,i=Quad.easeOut,r=0;TweenLite.set(a.container,{display:"inherit",clip:"rect(0px 0px "+adParams.adHeight+"px 0px)"}),TweenLite.set(a.score.container,{opacity:1}),TweenLite.set(a.resultText1.container,{opacity:1}),TweenLite.set(a.resultText2.container,{opacity:1}),TextUtils.addText(a.score.textfield,adData.score+"/"+adData.questions.length),TextUtils.fitContainerToText(a.score,!0,!0),Align.moveX(Align.CENTER,a.score.container);var s=Styles.getCss(a.score.textfield,"height")+20;Styles.setCss(a.resultText1.textfield,"font-size",a.fontSize),TextUtils.addText(a.resultText1.textfield,adData.resultText(1)),TextUtils.autosizeTF(a.resultText1.textfield),Align.moveX(Align.CENTER,a.resultText1.textfield),Styles.setCss(a.resultText1.container,"top",s),s+=Styles.getCss(a.resultText1.textfield,"height")+7,TextUtils.addText(a.resultText2.textfield,adData.resultText(2)),TextUtils.autosizeTF(a.resultText2.textfield),Align.moveX(Align.CENTER,a.resultText2.textfield),Styles.setCss(a.resultText2.container,"top",s),s+=Styles.getCss(a.resultText2.textfield,"height"),Styles.setCss(a.contentContainer,"height",s),Align.moveX(Align.CENTER,a.resultText1.container),Align.moveX(Align.CENTER,a.resultText2.container),Align.moveY(Align.CENTER,a.contentContainer,-11),TweenLite.to(a.container,n,{clip:"rect(0px "+adParams.adWidth+"px "+adParams.adHeight+"px 0px)",ease:Quad.easeInOut,onComplete:a.showCallback}),TweenLite.from(a.score.container,n,{delay:r,x:t,ease:i}),r+=.1,TweenLite.from(a.resultText1.container,n,{delay:r,x:t,ease:i}),r+=.1,TweenLite.from(a.resultText2.container,n,{delay:r,x:t,ease:i}),TweenLite.delayedCall(3,e)},a},EndframeCtaBTN=function(){function e(e){a.callback()}function t(){}var a=this;return a.container,a.callback,a.arrow,a.isOver=!1,a.maxOverTime=1,a.build=function(e){var n=e.target||adData.elements.redAdContainer,i=e.fontSize||18,r=e.lineHeight||i,s=e.width||360,o=e.height||22,l=e.top||0,d=e.left||0,u=e.margin||0,c=e.multiline||!0;a.callback=e.callback||t;var h=e.spacer||4;a.container=new UIComponent({id:"endframe_cta",target:n,css:{width:s,height:o,top:l,left:d,position:"absolute"}});var g=Markup.addTextfield({id:"endframe_cta1_text",target:a.container,css:{width:s,height:o},margin:u,multiline:c,textStyles:"color: "+adData.whiteColor+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.secondaryFont+"; text-align: left;"},adData.endframeCTA1,!1,!1);i=r=TextUtils.autosizeTF(g.textfield);var m=Styles.getCss(g.textfield,"width")+h,f=Markup.addTextfield({id:"endframe_cta2_text",target:a.container,css:{width:s,height:o,left:m},margin:u,multiline:c,textStyles:"color: "+adData.whiteColor+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.primaryFont+"; text-align: left;"},adData.endframeCTA2,!1,!1);i=r=TextUtils.autosizeTF(f.textfield),m+=Styles.getCss(f.textfield,"width")+h,a.arrow=Markup.addTextfield({id:"endframe_cta_arrow",target:a.container,css:{width:s,height:o,left:m},margin:u,multiline:c,textStyles:"color: "+adData.huluColors.primaryGreen+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.primaryFont+"; text-align: left;"},"â€º",!1,!1),TextUtils.fitContainerToText(a.arrow,!0,!0),Styles.setCss(a.container,"width",m+Styles.getCss(a.arrow.textfield,"width")),Gesture.disableChildren(a.container),a.show()},a.show=function(){a.registerEvents()},a.hide=function(){},a.onHitRollOver=function(e){a.isOver||(a.isOver=!0,TweenLite.killDelayedCallsTo(a.onHitRollOut),TweenLite.delayedCall(a.maxOverTime,a.onHitRollOut));var t=.25,n=Quad.easeInOut;TweenLite.to(a.arrow.textfield,t,{x:5,color:adData.whiteColor,ease:n,onComplete:function(){TweenLite.to(a.arrow.textfield,t,{x:0,color:adData.huluColors.primaryGreen,ease:n,onComplete:function(){a.isOver&&a.onHitRollOver()}})}})},a.onHitRollOut=function(e){TweenLite.killDelayedCallsTo(a.onHitRollOut),a.isOver=!1},a.unregisterEvents=function(){Gesture.removeEventListener(a.container,GestureEvent.OVER,a.onHitRollOver),Gesture.removeEventListener(a.container,GestureEvent.OUT,a.onHitRollOut),Gesture.removeEventListener(a.container,GestureEvent.CLICK,e);
},a.registerEvents=function(){Gesture.addEventListener(a.container,GestureEvent.OVER,a.onHitRollOver),Gesture.addEventListener(a.container,GestureEvent.OUT,a.onHitRollOut),Gesture.addEventListener(a.container,GestureEvent.CLICK,e)},a},Gallery=function(){function e(){if(trace("Gallery.onNext()"),!a.isAnimating){var e=.5,t=Quad.easeOut;a.isAnimating=!0;var n=a.currentSlideIndex+1>a.slides.length-1?a.slides[0]:a.slides[a.currentSlideIndex+1];TweenLite.to(a.slides[a.currentSlideIndex],e,{left:-a.thumbsContainerWidth,ease:t,onComplete:function(){a.isAnimating=!1}}),TweenLite.fromTo(n,e,{left:a.thumbsContainerWidth},{left:0,ease:t}),a.currentSlideIndex++,a.currentSlideIndex>=a.slides.length&&(a.currentSlideIndex=0)}}function t(){if(trace("Gallery.onPrev();"),!a.isAnimating){var e=.5,t=Quad.easeOut;a.isAnimating=!0;var n=a.currentSlideIndex-1<0?a.slides[a.slides.length-1]:a.slides[a.currentSlideIndex-1];TweenLite.to(a.slides[a.currentSlideIndex],e,{left:a.thumbsContainerWidth,ease:t,onComplete:function(){a.isAnimating=!1}}),TweenLite.fromTo(n,e,{left:-a.thumbsContainerWidth},{left:0,ease:t}),a.currentSlideIndex--,a.currentSlideIndex<0&&(a.currentSlideIndex=a.slides.length-1)}}var a=this;return a.container,a.rightBTN,a.leftBTN,a.slides,a.height,a.width,a.isAnimating=!1,a.currentSlideIndex=0,a.thumbsContainerWidth=0,a.build=function(n){var i=n.target||adData.elements.redAdContainer,r=n.top||102,s=n.left||0,o=a.width=n.width||adParams.adWidth,l=a.height=n.height||adParams.adHeight;a.container=new UIComponent({id:"endframe_gallery",target:i,css:{width:o,height:l,top:r,left:s,position:"absolute"}}),Gesture.disable(a.container);var d=ImageManager.get(adData.endframeImages[0]),u=5,c=1;a.thumbsContainerWidth=u*(d.width+c),a.thumbsContainer=new UIComponent({id:"thumbs_container",target:a.container,css:{width:a.thumbsContainerWidth,height:l,position:"absolute",overflow:"hidden"}});var h;a.thumbs=[];var g,m=0;a.slides=[];var f,p=1;for(g=0;g<adData.endframeImages.length/u;g++)f=new UIComponent({id:"gallery_slide_"+(g+1),target:a.thumbsContainer,css:{width:a.thumbsContainerWidth,height:d.height,left:g*a.thumbsContainerWidth,position:"absolute"}}),a.slides.push(f),p-=.25;for(var w=-1,g=0;g<adData.endframeImages.length;g++)g%5==0&&(w++,m=0),d=ImageManager.get(adData.endframeImages[g]),trace("		thumbData.width:"+d.width),h=new GalleryThumbBTN,h.build({id:"gallery_thumb_"+(g+1),thumbData:d,target:a.slides[w],source:adData.endframeImages[g],left:m}),m+=d.width+c,a.thumbs.push(h);adData.endframeImages.length>5&&(a.leftBTN=new GalleryNavBTN,a.leftBTN.build({id:"left",target:a.container,left:5,height:d.height,callback:t}),a.rightBTN=new GalleryNavBTN,a.rightBTN.build({id:"right",target:a.container,height:d.height,callback:e}),Align.moveX(Align.RIGHT,a.rightBTN.container,-5)),Align.moveX(Align.CENTER,a.thumbsContainer),Styles.setCss(a.container,"height",d.height),Styles.setCss(a.thumbsContainer,"height",d.height)},a.show=function(e){TweenLite.set(a.container,{clip:"rect(0px "+a.width+"px "+a.height+"px 0px)"}),a.rightBTN&&a.rightBTN.show(),a.leftBTN&&a.leftBTN.show();for(var t=e.delay,n=a.thumbs.length-1;n>=0;n--)a.thumbs[n].show(e),n%5==0?e.delay=t:e.delay+=.1},a.hide=function(){TweenLite.to(a.container,.5,{clip:"rect(0px "+a.width+"px "+a.height+"px "+a.width+"px)",ease:Quad.easeInOut})},a},ReplayBTN=function(){function e(e){n.isOver=!1,n.unregisterEvents(),n.callback()}function t(){Gesture.addEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.addEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.addEventListener(n.container,GestureEvent.CLICK,e)}function a(){}var n=this;return n.container,n.callback,n.arrow,n.isOver=!1,n.maxOverTime=1,n.opacity=.6,n.build=function(e){var t=e.target||adData.elements.redAdContainer,i=e.fontSize||18,r=e.lineHeight||i,s=n.width=e.width||n.width,o=n.height=e.height||n.height,l=e.top||0,d=e.left||0,u=e.margin||0,c=e.multiline||!1,h=e.letterSpacing||0;n.callback=e.callback||a,n.container=new UIComponent({id:"ReplayBTN",target:t,css:{width:s,height:o,top:l,left:d,position:"absolute",opacity:n.opacity}});var g=Markup.addTextfield({id:"replay_text",target:n.container,css:{width:s,height:o},margin:u,multiline:c,textStyles:"color: "+adData.huluColors.primaryGreen+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.tertiaryFont+"; text-align: left; letter-spacing: "+h+"px;"},adData.replay,!1,!1);TextUtils.autosizeTF(g.textfield),Align.moveY(Align.CENTER,g.textfield,1);var m=Styles.getCss(g.textfield,"width")+3,f=ImageManager.get("replay");n.arrow=new UIImage({id:"replay_arrow",target:n.container,source:"replay",css:{left:m}}),Styles.setCss(n.container,"width",m+f.width),Gesture.disableChildren(n.container)},n.show=function(e){trace("ReplayBTN.show()"),trace("		args:"+e);for(var a in e)trace("			"+a+":"+e[a]);TweenLite.fromTo(n.container,e.animationTime,{opacity:0,x:e.startX},{delay:e.delay,opacity:n.opacity,x:0,ease:e.easeFunc}),t()},n.hide=function(e){n.isOver=!1,TweenLite.killDelayedCallsTo(n.onHitRollOut),n.unregisterEvents(),TweenLite.killTweensOf(n.container),TweenLite.to(n.container,e.animationTime,{delay:e.delay,opacity:0,x:e.destX,ease:e.easeFunc})},n.onHitRollOver=function(e){n.isOver||(n.isOver=!0,TweenLite.killDelayedCallsTo(n.onHitRollOut),TweenLite.delayedCall(n.maxOverTime,n.onHitRollOut));var t=1,a=Expo.easeOut;TweenLite.to(n.container,.25,{opacity:1,ease:a}),TweenLite.fromTo(n.arrow,t,{rotation:360},{transformOrigin:"50% 60%",rotation:0,color:adData.whiteColor,ease:a,onComplete:function(){n.isOver&&n.onHitRollOver()}})},n.onHitRollOut=function(e){TweenLite.to(n.container,.5,{opacity:n.opacity,ease:Quad.easeInOut}),TweenLite.killDelayedCallsTo(n.onHitRollOut),n.isOver=!1},n.unregisterEvents=function(){Gesture.removeEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.removeEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.removeEventListener(n.container,GestureEvent.CLICK,e)},n},ActionBTN=function(){function e(e){adData.userInteracted=!0,a.unregisterEvents(),a.isCorrect?a.onSetCorrect(a):a.onSetWrong(a),a.callback()}function t(){}var a=this;return a.container,a.height=42,a.width=198,a.fill,a.fillOVER,a.callback,a.isCorrect=!1,a.isWrong=!1,a.id,a.fillColor,a.fillShowing=0,a.isOver=!1,a.build=function(e){var n=a.id=e.id||"ActionBTN",i=e.target||adData.elements.redAdContainer,r=e.fontSize||14,s=e.lineHeight||r,o=a.width=e.width||a.width,l=a.height=e.height||a.height,d=e.top||0,u=e.left||0,c=e.margin||5,h=e.multiline||!0,g=e.copy||"START PLAYING";a.callback=e.callback||t,a.isCorrect=e.isCorrect,a.fillShowing=e.fillShowing||0,a.container=new UIComponent({id:n+"_btn_container",target:i,css:{width:o,height:l,top:d,left:u,position:"absolute",opacity:0}});UIImage({id:n+"_btn_border",target:a.container,source:"btnBorder",css:{width:o,height:l,position:"absolute"}});a.fill=adData.elements[n+"_fill"]=CanvasDrawer.create({id:n+"_fillCanvas",target:a.container,css:{width:o,height:l},styles:"position: absolute;",display:!0,retina:!1,debug:!1});a.fill.addImage({source:"btnFill",id:n+"_btnFill",params:{x:0,y:0,width:o,height:l}});a.fillColor=a.fill.addShape({type:CanvasDrawType.RECT,id:n+"_fillColor",params:{width:o,height:l},blendMode:CanvasBlendMode.SOURCE_IN,fill:adData.huluColors.primaryGreen}),a.fill.update(),a.fillOVER=UIImage({id:n+"_btn_fillOVER",target:a.container,source:"btnFillOVER",css:{width:o,height:l,position:"absolute",opacity:0}}),a.copyTF=Markup.addTextfield({id:n+"_btn_text",target:a.container,css:{width:o,height:l},margin:c,multiline:h,textStyles:"color: "+adData.whiteColor+"; font-size: "+r+"px; line-height: "+s+"px; font-family: "+adData.tertiaryFont+"; text-align: center;"},g,!1,!1),TextUtils.autosizeTF(a.copyTF.textfield),Align.move(Align.CENTER,a.copyTF.textfield),Gesture.disableChildren(a.container)},a.simpleShow=function(){Styles.setCss(a.container,"opacity",1),Styles.setCss(a.fillOVER,"opacity",0),a.fill.tween.set(a.id+"_btnFill",{opacity:0}),a.fill.tween.start(),TweenLite.delayedCall(.2,a.registerEvents)},a.blink=function(){a.isOver||(a.fill.tween.fromTo(a.id+"_btnFill",.5,{opacity:0},{opacity:1,ease:Quad.easeOut,onComplete:function(){trace("ActionBTN.blink() onComplete"),a.fill.tween.kill(),TweenLite.delayedCall(.1,function(){a.fill.tween.to(a.id+"_btnFill",.5,{opacity:0,ease:Quad.easeIn}),a.fill.tween.start()})}}),a.fill.tween.start())},a.updateText=function(e){TextUtils.addText(a.copyTF.textfield,e),TextUtils.autosizeTF(a.copyTF.textfield),Align.move(Align.CENTER,a.copyTF.textfield)},a.show=function(e){a.fillColor.fill=adData.huluColors.primaryGreen,a.fill.update();var t=e||0;adData.autoplay?TweenLite.delayedCall(t,function(){Styles.setCss(a.container,"opacity",1),TweenLite.fromTo(a.fillOVER,.25,{opacity:1},{opacity:0,ease:Quad.easeOut}),a.fill.tween.fromTo(a.id+"_btnFill",.45,{opacity:1},{opacity:a.fillShowing,ease:Quad.easeInOut}),a.fill.tween.start(),TweenLite.delayedCall(.2,a.registerEvents)}):(Styles.setCss(a.container,"opacity",1),TweenLite.set(a.fillOVER,{opacity:0}),a.fill.tween.set(a.id+"_btnFill",{opacity:a.fillShowing}),a.fill.tween.start(),a.registerEvents())},a.hide=function(e){a.unregisterEvents(),TweenLite.killDelayedCallsTo(a.registerEvents),TweenLite.killTweensOf(a.fillOVER),a.fill.tween.kill(),e?TweenLite.set(a.container,{opacity:0}):TweenLite.to(a.container,.25,{opacity:0,ease:Quad.easeInOut})},a.reset=function(){a.fillColor.fill=adData.huluColors.primaryGreen,a.onHitRollOut()},a.onSetCorrect=function(){a.fillColor.fill=adData.huluColors.primaryGreen,a.onHitRollOver()},a.onSetWrong=function(){a.isWrong=!0,a.fillColor.fill=adData.wrongColor,a.onHitRollOver()},a.onHitRollOver=function(e){a.isOver=!0,TweenLite.fromTo(a.fillOVER,.5,{opacity:1},{opacity:0,ease:Quad.easeOut}),a.fill.tween.set(a.id+"_btnFill",{opacity:1}),a.fill.tween.start()},a.onHitRollOut=function(e){a.isOver=!1,TweenLite.to(a.fillOVER,.5,{opacity:0,ease:Quad.easeOut}),a.fill.tween.fromTo(a.id+"_btnFill",.5,{opacity:1},{opacity:a.fillShowing,ease:Quad.easeInOut}),a.fill.tween.start()},a.onResetState=function(){a.isOver=!1,a.fill.tween.to(a.id+"_btnFill",.5,{opacity:a.fillShowing,ease:Quad.easeInOut}),a.fill.tween.start()},a.unregisterEvents=function(){Gesture.removeEventListener(a.container,GestureEvent.OVER,a.onHitRollOver),Gesture.removeEventListener(a.container,GestureEvent.OUT,a.onHitRollOut),Gesture.removeEventListener(a.container,GestureEvent.CLICK,e)},a.registerEvents=function(){Gesture.addEventListener(a.container,GestureEvent.OVER,a.onHitRollOver),Gesture.addEventListener(a.container,GestureEvent.OUT,a.onHitRollOut),Gesture.addEventListener(a.container,GestureEvent.CLICK,e)},a},QuizCtaBTN=function(){function e(e){n.callback()}function t(){Gesture.addEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.addEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.addEventListener(n.container,GestureEvent.CLICK,e)}function a(){}var n=this;return n.container,n.callback,n.arrow,n.isOver=!1,n.maxOverTime=1,n.build=function(e){var t=e.target||adData.elements.redAdContainer,i=e.fontSize||18,r=e.lineHeight||i,s=n.width=e.width||n.width,o=n.height=e.height||n.height,l=e.top||0,d=e.left||0,u=e.margin||0,c=e.multiline||!0;n.callback=e.callback||a,n.container=new UIComponent({id:"quiz_cta",target:t,css:{width:s,height:o,top:l,left:d,position:"absolute"}});var h=Markup.addTextfield({id:"quiz_cta_text",target:n.container,css:{width:s,height:o},margin:u,multiline:c,textStyles:"color: "+adData.whiteColor+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.primaryFont+"; text-align: left;"},adData.quizCTA,!1,!1);i=r=TextUtils.autosizeTF(h.textfield);var g=Styles.getCss(h.textfield,"width")+3;n.arrow=Markup.addTextfield({id:"quiz_cta_arrow",target:n.container,css:{width:s,height:o,left:g},margin:u,multiline:c,textStyles:"color: "+adData.huluColors.primaryGreen+"; font-size: "+i+"px; line-height: "+r+"px; font-family: "+adData.primaryFont+"; text-align: left;"},"â€º",!1,!1),TextUtils.fitContainerToText(n.arrow,!0,!0),Styles.setCss(n.container,"width",g+Styles.getCss(n.arrow.textfield,"width")),Gesture.disableChildren(n.container),n.show()},n.show=function(){t()},n.hide=function(){},n.onHitRollOver=function(e){n.isOver||(n.isOver=!0,TweenLite.killDelayedCallsTo(n.onHitRollOut),TweenLite.delayedCall(n.maxOverTime,n.onHitRollOut));var t=.25,a=Quad.easeInOut;TweenLite.to(n.arrow.textfield,t,{x:3,color:adData.whiteColor,ease:a,onComplete:function(){TweenLite.to(n.arrow.textfield,t,{x:0,color:adData.huluColors.primaryGreen,ease:a,onComplete:function(){n.isOver&&n.onHitRollOver()}})}})},n.onHitRollOut=function(e){TweenLite.killDelayedCallsTo(n.onHitRollOut),n.isOver=!1},n.unregisterEvents=function(){Gesture.removeEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.removeEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.removeEventListener(n.container,GestureEvent.CLICK,e)},n},QuizQuestion=function(){function e(){TweenLite.killTweensOf(d.image)}function t(){for(var e=0;e<d.answers.length;e++)d.answers[e].registerEvents()}function a(){for(var e=0;e<d.answers.length;e++)d.answers[e].unregisterEvents()}function n(){for(var e,t=0;t<d.answers.length;t++)e=d.answers[t],e.unregisterEvents(),e.isCorrect||e.isWrong||e.onResetState()}function i(){d.isCorrect=!0,a(),n(),d.onAnswered(!0),d.resolve()}function r(){d.isCorrect=!1,a(),n(),d.onAnswered(!1),TweenLite.delayedCall(.5,d.correctAnswerBTN.onSetCorrect),d.resolve()}function s(){d.isCorrect?d.answerCORRECT.show():d.answerWRONG.show()}function o(){d.video.show()}function l(){}var d=this;return d.container,d.id,d.imageContainer,d.image,d.btns,d.imageWidth,d.answers,d.correctAnswerBTN,d.answerCORRECT,d.answerWRONG,d.callback,d.onAnswered,d.startScale=3,d.imageAnimation,d.isCorrect=!1,d.question="",d.firstPlay=!0,d.showing=!1,d.build=function(e){d.id=e.id||1;var t=e.target||adData.elements.redAdContainer;d.callback=e.callback||l,d.onAnswered=e.onAnswered||l,d.imageWidth=e.imageWidth||520;var a=adParams.adWidth-d.imageWidth;d.container=new UIComponent({id:"question_"+d.id,target:t,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute"}}),Gesture.disable(d.container),d.answersContainer=new UIComponent({id:"answersContainer_"+d.id,target:d.container,css:{width:a-6,height:137,position:"absolute"}});var n=new UIComponent({id:"answersInnerContainer_"+d.id,target:d.answersContainer,css:{width:407,height:97,top:96,position:"absolute"}}),s=["a","b","c","d"];d.answers=[];var u,c=12,h=0,g=0,m=adData.questions[d.id-1];d.question=m.question;for(var f,p=0;4>p;p++)p>1&&(h=u.height+c),g=(p+1)%2?0:u.width+c,f=m.answer.toLowerCase()==s[p],u=new ActionBTN,u.build({id:"answer_"+d.id+"_"+(p+1),target:n,copy:m.answers[p],top:h,left:g,isCorrect:f,callback:f?i:r}),f&&(d.correctAnswerBTN=u),d.answers.push(u);var w=d.answers[d.answers.length-1];Styles.setCss(n,"width",Styles.getCss(w.container,"left")+w.width),Styles.setCss(n,"height",Styles.getCss(w.container,"top")+w.height),Align.moveX(Align.CENTER,n),d.answersCover=new UIComponent({id:"answersCover_"+d.id,target:n,css:{width:a-6,height:137,position:"absolute",backgroundColor:adData.greyColor,opacity:0}}),d.imageContainer=new UIComponent({id:"questionImageContainer_"+d.id,target:d.container,css:{width:d.imageWidth,height:adParams.adHeight,left:a,position:"absolute",overflow:"hidden",opacity:0}}),d.image=new UIImage({id:"questionImage_"+d.id,target:d.imageContainer,source:adData.questions[d.id-1].image,css:{}}),TweenLite.set(d.image,{scale:d.startScale}),d.video=new QuizQuestionVideo,d.video.build({id:"video_"+d.id,target:d.imageContainer,videoID:adData.videoIDs[d.id-1],callback:d.callback}),d.answerCORRECT=new QuizResultMarker,d.answerCORRECT.build({target:d.imageContainer,id:d.id+"_CORRECT",isCorrect:!0,callback:o}),Align.move(Align.CENTER,d.answerCORRECT.container),d.answerWRONG=new QuizResultMarker,d.answerWRONG.build({target:d.imageContainer,id:d.id+"_WRONG",isCorrect:!1,callback:o}),Align.move(Align.CENTER,d.answerWRONG.container),Styles.setCss(d.container,"display","none")},d.reset=function(){TweenLite.set(d.container,{opacity:0}),TweenLite.set(d.image,{scale:d.startScale});for(var e=0;e<d.answers.length;e++)d.answers[e].reset();t()},d.resolve=function(){e(),TweenLite.to(d.image,adData.questionQuickResolveTime,{scale:1,ease:Quad.easeOut,onComplete:s})},d.timerAnimation=function(){d.imageAnimation=TweenLite.fromTo(d.image,adData.questionTime,{scale:d.startScale},{scale:1,ease:Circ.easeOut,onComplete:r})},d.show=function(){trace("QuizQuestion.show() self.id:"+d.id),TweenLite.set(d.container,{opacity:1,display:"inherit"});for(var e=0;e<d.answers.length;e++)d.answers[e].show(.5+.2*e);d.firstPlay==!adData.autoplay?(d.firstPlay=!1,TweenLite.set(d.imageContainer,{opacity:1})):d.showing?TweenLite.to(d.imageContainer,.5,{opacity:1,ease:Quad.easeInOut}):TweenLite.fromTo(d.imageContainer,.5,{opacity:0},{opacity:1,ease:Quad.easeInOut}),d.showing=!0},d.resetAnswers=function(){for(var e=0;e<d.answers.length;e++)d.answers[e].hide();TweenLite.killTweensOf(d.image),TweenLite.to(d.image,1.5,{scale:d.startScale,ease:Quad.easeOut})},d.hide=function(){for(var e=0;e<d.answers.length;e++)d.answers[e].hide();TweenLite.to(d.container,1,{opacity:0,ease:Quad.easeInOut,onComplete:function(){d.showing=!1,Styles.setCss(d.container,"display","none")}})},d.pause=function(){adData.autoplay?TweenLite.to(d.answersCover,.5,{opacity:.85,ease:Quad.easeOut}):TweenLite.set(d.answersCover,{opacity:.85}),a(),d.imageAnimation&&d.imageAnimation.pause()},d.replay=function(){TweenLite.to(d.answersCover,.5,{opacity:0,ease:Quad.easeOut}),d.timerAnimation()},d},Timer=function(){var e=this;return e.container,e.width,e.segments,e.segment,e.build=function(t){var a=t.target||adData.elements.redAdContainer;e.width=t.width||6;var n=t.left||0;e.container=new UIComponent({id:"timer",target:a,css:{width:e.width,height:adParams.adHeight,left:n,position:"absolute"}}),e.bg=new UIComponent({id:"timerBG",target:e.container,css:{width:e.width,height:adParams.adHeight,position:"absolute",backgroundColor:"#404041"}}),TweenLite.set(e.bg,{transformOrigin:"left top",scaleY:0}),e.segments=[];for(var i,r=adParams.adHeight/adData.questions.length,s=0;s<adData.questions.length;s++)i=new TimerSegment,i.build({id:s+1,target:e.container,hasBullet:s<adData.questions.length-1,height:r,top:r*s}),e.segments.push(i);e.segment=e.segments[0]},e.resolve=function(t){e.segment.resolve(t)},e.pause=function(){e.segment.pause()},e.reset=function(){e.segment.reset()},e.replay=function(){e.timerAnimation(e.segment.id)},e.resetAll=function(){e.segment=e.segments[0],TweenLite.set(e.bg,{scaleY:0});for(var t=0;t<e.segments.length;t++)e.segments[t].reset(!0)},e.timerAnimation=function(t){e.segment=e.segments[t-1],e.segment.timerAnimation()},e.show=function(){adData.autoplay?TweenLite.to(e.bg,.5,{scaleY:1,ease:Quad.easeOut}):TweenLite.set(e.bg,{scaleY:1});for(var t=0;t<e.segments.length;t++)e.segments[t].show()},e.hide=function(){},e},GalleryNavBTN=function(){function e(a){r.isOver||(r.isOver=!0,TweenLite.killDelayedCallsTo(t),TweenLite.delayedCall(r.maxOverTime,t));var n=.25,i=Quad.easeInOut;TweenLite.to(r.arrow,n,{x:4,color:adData.whiteColor,ease:i,onComplete:function(){TweenLite.to(r.arrow,n,{x:0,color:adData.huluColors.primaryGreen,ease:i,onComplete:function(){r.isOver&&e()}})}})}function t(e){TweenLite.killDelayedCallsTo(t),r.isOver=!1}function a(e){r.callback()}function n(){Gesture.addEventListener(r.container,GestureEvent.OVER,e),Gesture.addEventListener(r.container,GestureEvent.OUT,t),Gesture.addEventListener(r.container,GestureEvent.CLICK,a)}function i(){}var r=this;return r.container,r.arrow,r.callback,r.isOver=!1,r.maxOverTime=1,r.build=function(e){var t=e.id||"galleryNavBTN",a=e.target||adData.elements.redAdContainer,n=e.top||0,s=e.left||0,o=e.width||16,l=e.height||32;r.callback=e.callback||i,r.container=new UIComponent({id:"galleryNavBTN_"+t,target:a,css:{width:o,height:l,top:n,left:s,position:"absolute",rotation:t.toLowerCase().indexOf("right")?180:0,opacity:0}}),r.arrow=new UIImage({id:"galleryNavBTN_arrow_"+t,target:r.container,source:"galleryArrow",css:{}}),Align.moveY(Align.CENTER,r.arrow),Gesture.disableChildren(r.container),r.show()},r.show=function(){n(),TweenLite.fromTo(r.container,.5,{x:-40,opacity:0},{delay:.5,x:0,opacity:1,ease:Quad.easeOut})},r.hide=function(){},r.unregisterEvents=function(){Gesture.removeEventListener(r.container,GestureEvent.OVER,e),Gesture.removeEventListener(r.container,GestureEvent.OUT,t),Gesture.removeEventListener(r.container,GestureEvent.CLICK,a)},r},GalleryThumbBTN=function(){function e(e){trace("GalleryThumbBTN.onHitClick()");var t=parseInt(n.id.replace("gallery_thumb_",""));trace("		id:"+t);var a=adData.endframeURLs[t-1];trace("		clickTagURL:"+a),adData.networkExit([2,a]),n.callback()}function t(){Gesture.addEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.addEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.addEventListener(n.container,GestureEvent.CLICK,e)}function a(){}var n=this;return n.container,n.image,n.id,n.url,n.callback,n.height,n.width,n.build=function(e){var t=n.id=e.id||"galleryThumbBTN",i=e.target||adData.elements.redAdContainer,r=e.top||0,s=e.left||0,o=e.source;thumbData=e.thumbData,n.width=e.width||thumbData.width,n.height=e.height||thumbData.height,n.url=e.url||"http://www.hulu.com/start",n.callback=e.callback||a,n.container=new UIComponent({id:t,target:i,css:{width:n.width,height:n.height,top:r,left:s,position:"absolute"}}),Gesture.disable(n.container);new UIImage({id:t+"_backImage",target:n.container,source:o,css:{}});n.bg=new UIComponent({id:t+"_border",target:n.container,css:{width:n.width,height:n.height,position:"absolute",opacity:.65,backgroundColor:adData.huluColors.primaryGreen}}),n.image=new UIImage({id:t+"_image",target:n.container,source:o,css:{}}),TweenLite.set(n.image,{clip:"rect(0px "+n.width+"px "+n.height+"px 0px)"})},n.show=function(e){var a=20;t(),TweenLite.fromTo(n.container,e.animationTime,{opacity:0,x:e.startX},{delay:e.delay,opacity:1,x:0,ease:Quad.easeOut}),TweenLite.fromTo(n.image,.5,{clip:"rect("+a+"px "+(n.width-a)+"px "+(n.height-a)+"px "+a+"px)"},{delay:e.delay,clip:"rect(0px "+n.width+"px "+n.height+"px 0px)",ease:Quad.easeInOut})},n.hide=function(){},n.onHitRollOver=function(e){var t=6;TweenLite.to(n.image,.5,{clip:"rect("+t+"px "+(n.width-t)+"px "+(n.height-t)+"px "+t+"px)",ease:Expo.easeOut})},n.onHitRollOut=function(e){TweenLite.to(n.image,.5,{clip:"rect(0px "+n.width+"px "+n.height+"px 0px)",ease:Quad.easeInOut})},n.unregisterEvents=function(){Gesture.removeEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.removeEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.removeEventListener(n.container,GestureEvent.CLICK,e)},n},QuizResultMarker=function(){function e(){}var t=this;return t.container,t.answerCORRECT,t.answerWRONG,t.callback,t.build=function(a){var n=a.id||1,i=a.target||adData.elements.redAdContainer,r=a.width||54,s=a.height||54,o=(a.fontSize||34,a.lineHeight||30,a.isCorrect?adData.huluColors.primaryColo:adData.wrongColor),l=a.isCorrect?"âˆš":"X";t.callback=a.callback||e,t.container=new UIComponent({id:"quizResultMarker_"+n,target:i,css:{width:r,height:s,position:"absolute"}});var d=CanvasDrawer.create({id:"quizFillCanvas_"+n,target:t.container,css:{width:r,height:s},styles:"position: absolute;",display:!0,retina:!1,debug:!1});d.addImage({source:"circle",id:"quizFillImg"+n,params:{x:0,y:0,width:r,height:s}}),d.addShape({type:CanvasDrawType.RECT,id:"quizFillColor_"+n,params:{width:r,height:s},blendMode:CanvasBlendMode.SOURCE_IN,fill:o});d.update();var u=Markup.addTextfield({id:"quizAnserMarkerSimbol_"+n,target:t.container,css:{width:r,height:s},margin:0,multiline:!1,textStyles:"color: "+adData.whiteColor+"; font-size: 34px; line-height: 30px; font-family: "+adData.primaryFont+"; text-align: center;"},l,!1,!1);Align.move(Align.CENTER,u.textfield,0,2),Styles.hide(t.container)},t.show=function(){Styles.show(t.container),TweenLite.fromTo(t.container,.75,{opacity:1},{opacity:0,ease:Quad.easeIn,onComplete:function(){t.callback(),Styles.hide(t.container)}})},t},QuizQuestionVideo=function(){function e(){adData.videoMuted?(adData.videoMuted=!1,n.ftVideo.video.muted=!1,n.mute.updateIcon("video_audioOn")):(adData.videoMuted=!0,n.ftVideo.video.muted=!0,n.mute.updateIcon("video_audioOff"))}function t(){adData.curVideoPlayer=null,n.videoPlaying=!1,n.ftVideo.video.pause(),n.playPause.unregisterEvents(),n.skip.unregisterEvents(),n.mute.unregisterEvents(),TweenLite.delayedCall(1,function(){Styles.hide(n.container)}),n.callback()}function a(){}var n=this;return n.container,n.ftVideo,n.playPause,n.showCallback,n.videoPlaying=!1,n.build=function(i){var r=i.id,s=i.target||adData.elements.redAdContainer,o=i.width||520,l=i.height||adParams.adHeight,d=i.videoID||"60277/126184_imdb_quiz_Blindspot_520x250";n.callback=i.callback||a,n.container=new UIComponent({id:r,target:s,css:{width:o,height:l,position:"absolute",backgroundColor:adData.greyColor}}),n.ftVideo=myFT.insertVideo({parent:n.container,video:d,height:250,width:520,controls:!1,autoplay:!1}),n.ftVideo.on("ended",function(){t()}),Gesture.disable(n.container),n.skip=new VideoControlsBTN,n.skip.build({target:n.container,id:"video_skip"+r,imageID:"video_skip",width:100,height:20,callback:t,copy:"SKIP",fontSize:13});var u=21,c=new UIComponent({id:"videoControlsContainer_"+r,target:n.container,css:{width:2*u+5,height:u,position:"absolute"}});n.playPause=new VideoControlsBTN,n.playPause.build({target:c,id:"video_pause"+r,imageID:"video_pause",width:u,height:u,callback:n.onPlayPause}),n.mute=new VideoControlsBTN,n.mute.build({target:c,id:"video_audioOn"+r,imageID:"video_audioOn",width:u,height:u,left:u+5,callback:e});var h=-6;Align.moveX(Align.CENTER,c),Align.moveY(Align.BOTTOM,c,h),Align.move(Align.TOP_RIGHT,n.skip.container,-8,17),Styles.hide(n.container)},n.show=function(){trace("QuizQuestionVideo.show()"),adData.curVideoPlayer=n,Styles.show(n.container),TweenLite.fromTo(n.container,.25,{opacity:0},{opacity:1,ease:Quad.easeInOut}),adData.isMobile?n.videoPlaying=!1:n.videoPlaying=!0,n.mute.updateIcon(adData.videoMuted?"video_audioOff":"video_audioOn"),n.ftVideo.video.currentTime=0,adData.isMobile?n.ftVideo.video.pause():n.ftVideo.video.play(),n.ftVideo.video.muted=adData.videoMuted,adData.isMobile?n.playPause.updateIcon("video_play"):n.playPause.updateIcon("video_pause"),n.playPause.show(),n.skip.show(),n.mute.show()},n.onPlayPause=function(e){trace("QuizQuestionVideo.onPlayPause()"),trace("		self.videoPlaying:"+n.videoPlaying),n.videoPlaying=e?!0:n.videoPlaying,n.videoPlaying?(n.videoPlaying=!1,n.ftVideo.video.pause(),n.playPause.updateIcon("video_play")):(n.videoPlaying=!0,n.ftVideo.video.play(),n.playPause.updateIcon("video_pause"))},n},TimerSegment=function(){function e(){TweenLite.killTweensOf(a.line)}function t(){a.resolve(!1)}var a=this;return a.container,a.line,a.bullet,a.id=0,a.animation,a.build=function(e){var t=a.id=e.id||1,n=e.target||adData.elements.redAdContainer,i=e.width||6,r=e.height||4,s=e.top||0,o=e.hasBullet||!1,l=e.bulletHeight||4;a.container=new UIComponent({id:"timerSegment_"+t,target:n,css:{width:i,height:r,top:s,position:"absolute"}}),a.line=new UIComponent({id:"line_"+t,target:a.container,css:{width:i,height:o?r-l:r,position:"absolute",backgroundColor:adData.huluColors.primaryGreen}}),TweenLite.set(a.line,{transformOrigin:"left top",scaleY:0}),o&&(a.bullet=new UIComponent({id:"bullet_"+t,target:a.container,css:{width:i,height:l,top:r-l,position:"absolute",backgroundColor:adData.whiteColor,opacity:0}}))},a.show=function(e){if(a.bullet){var t=e?0:.15*a.id;TweenLite.killTweensOf(a.bullet),adData.autoplay?TweenLite.fromTo(a.bullet,.25,{opacity:0,scale:4},{delay:t,opacity:1,scale:1,ease:Quad.easeOut}):TweenLite.set(a.bullet,{opacity:1,scale:1})}},a.reset=function(e){TweenLite.killTweensOf(a.line),e?(TweenLite.set(a.line,{scaleY:0}),a.bullet&&TweenLite.set(a.bullet,{opacity:0})):TweenLite.to(a.line,1.5,{scaleY:0,ease:Quad.easeOut})},a.pause=function(){adData.quizTimerTicking=!1,a.animation&&a.animation.pause()},a.resolve=function(t){adData.quizTimerTicking=!1,e(),a.show(!0),TweenLite.to(a.line,adData.questionQuickResolveTime,{scaleY:1});var n=t?adData.huluColors.primaryGreen:adData.wrongColor;TweenLite.fromTo(a.line,1,{backgroundColor:adData.whiteColor},{backgroundColor:n,ease:Quad.easeOut})},a.timerAnimation=function(){adData.quizTimerTicking=!0,TweenLite.set(a.line,{backgroundColor:adData.huluColors.primaryGreen}),a.animation=TweenLite.fromTo(a.line,adData.questionTime,{scaleY:0},{scaleY:1,ease:Linear.easeNone,onComplete:t})},a},VideoControlsBTN=function(){function e(e){trace("VideoControlsBTN.onHitClick()"),trace("		self.callback:"+n.callback),n.callback()}function t(){Gesture.addEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.addEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.addEventListener(n.container,GestureEvent.CLICK,e)}function a(){}var n=this;return n.container,n.icon,n.iconOVER,n.copyTF,n.callback,n.build=function(e){var t=e.id||"playPause",i=e.imageID||"playPause",r=e.target||adData.elements.redAdContainer,s=e.width||20,o=e.height||20,l=e.top||0,d=e.left||0,u=e.copy,c=e.fontSize||13,h=e.lineHeight||c;n.callback=e.callback||a,n.container=new UIComponent({id:"videoControlsBTN_"+t+i,target:r,css:{width:s,height:o,top:l,left:d,position:"absolute"}}),u?(n.copyTF=Markup.addTextfield({id:"videoControlsBTN_copy_"+t+i,target:n.container,css:{width:s,height:o},margin:0,multiline:!1,textStyles:"color: "+adData.huluColors.primaryGreen+"; font-size: "+c+"px; line-height: "+h+"px; font-family: "+adData.tertiaryFont+"; text-align: center;"},u,!1,!1),TextUtils.fitContainerToText(n.copyTF,!0,!0),Styles.setCss(n.container,"width",Styles.getCss(n.copyTF.container,"width")),Styles.setCss(n.container,"height",Styles.getCss(n.copyTF.container,"height"))):(n.icon=new UIImage({id:"videoControlsBTN_icon_"+t+i,target:n.container,source:i,css:{width:s,height:o}}),n.iconOVER=new UIImage({id:"videoControlsBTN_iconOVER_"+t+i,target:n.container,source:i+"_OVER",css:{width:s,height:o,opacity:0}})),Gesture.disableChildren(n.container)},n.updateIcon=function(e){trace("VideoControlsBTN.updateIcon()"),trace("		id:"+e),Styles.setCss(n.icon,"background-image",ImageManager.get(e).src),Styles.setCss(n.iconOVER,"background-image",ImageManager.get(e+"_OVER").src)},n.show=function(){t()},n.hide=function(){},n.onHitRollOver=function(e){trace("VideoControlsBTN.onHitRollOver()"),n.copyTF?TweenLite.to(n.copyTF.textfield,.15,{color:adData.whiteColor,ease:Quad.easeOut}):TweenLite.to(n.iconOVER,.15,{opacity:1,ease:Quad.easeOut})},n.onHitRollOut=function(e){trace("VideoControlsBTN.onHitRollOut()");var t=.5;n.copyTF?TweenLite.to(n.copyTF.textfield,t,{color:adData.huluColors.primaryGreen,ease:Quad.easeInOut}):TweenLite.to(n.iconOVER,t,{opacity:0,ease:Quad.easeInOut})},n.unregisterEvents=function(){Gesture.removeEventListener(n.container,GestureEvent.OVER,n.onHitRollOver),Gesture.removeEventListener(n.container,GestureEvent.OUT,n.onHitRollOut),Gesture.removeEventListener(n.container,GestureEvent.CLICK,e),n.onHitRollOut()},n},Control=new function(){this.prepareBuild=function(){trace("Control.prepareBuild()"),Control.preMarkup(),View.buildMarkup(),Control.postMarkup(),Animation.startScene()},this.preMarkup=function(){trace("Control.preMarkup()")},this.postMarkup=function(){trace("Control.postMarkup()"),Gesture.addEventListener(adData.elements.startBTN,GestureEvent.CLICK,Control.onStartClicked),Gesture.addEventListener(adData.elements.startBTN,GestureEvent.OVER,adData.elements.intro.btn.onHitRollOver),Gesture.addEventListener(adData.elements.startBTN,GestureEvent.OUT,adData.elements.intro.btn.onHitRollOut)},this.onStartClicked=function(e){adData.userInteracted=!0,Animation.skipIntro()},this.reset=function(){adData.autoplay=!0,
Gesture.removeEventListener(adData.elements.exitBTN,GestureEvent.OVER,adData.elements.endframe.endframeCTA.onHitRollOver),Gesture.removeEventListener(adData.elements.exitBTN,GestureEvent.OUT,adData.elements.endframe.endframeCTA.onHitRollOut),adData.elements.quiz.reset(),Animation.showQuiz()}},View=new function(){this.buildMarkup=function(){trace("View.buildMarkup()"),adData.guide&&(adData.elements.guide=new UIImage({id:"guide",target:adData.elements.redAdContainer,source:adData.guide,css:{}})),adData.elements.bg=new UIComponent({id:"bg",target:adData.elements.redAdContainer,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute",backgroundColor:adData.greyColor}}),adData.elements.exitBTN=new UIComponent({id:"exitBTN",target:adData.elements.redAdContainer,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute"}}),adData.elements.quiz=new Quiz,adData.elements.quiz.build({target:adData.elements.redAdContainer,quizWidth:444,callback:Animation.showResults,question:{imageWidth:520},marker:{width:30,height:30,top:17,leftOffset:8,fontSize:11,lineHeight:11},header:{height:50,fontSize:28,lineHeight:28,top:23},cta:{}}),adData.elements.results=new Results,adData.elements.results.build({callback:Animation.showEndframe,showCallback:Animation.hideQuiz}),adData.elements.endframe=new Endframe,adData.elements.endframe.build({callback:Animation.showQuiz,resetCallback:Control.reset}),adData.elements.intro=new Intro,adData.elements.intro.build({callback:Animation.skipIntro}),adData.elements.startBTN=new UIComponent({id:"startBTN",target:adData.elements.redAdContainer,css:{width:adParams.adWidth,height:adParams.adHeight,position:"absolute"}});var e="logo";adData.elements.logo=new UIImage({id:e,target:adData.elements.redAdContainer,source:e,css:{}}),Align.move(Align.BOTTOM_LEFT,adData.elements.logo,19,-13),Gesture.disable(adData.elements.logo),Markup.addBorder("main",adData.elements.redAdContainer,2,"#000000"),Styles.setBackgroundColor(adData.elements.redAdContainer,"#cccccc")}},Animation=new function(){this.startScene=function(){trace("Animation.startScene()"),Styles.setCss(global.adData.elements.redAdContainer,"opacity","1");var e=document.getElementById("preloader");TweenLite.fromTo(e,.5,{clip:"rect( 0px, "+adParams.adWidth+"px, "+adParams.adHeight+"px, 0px )"},{clip:"rect( 0px, "+adParams.adWidth+"px, "+adParams.adHeight+"px, "+adParams.adWidth+"px )",ease:Quad.easeInOut,onComplete:function(){global.removePreloader()}}),adData.autoplay?adData.elements.intro.show():Animation.skipIntro()},this.skipIntro=function(){trace("Animation.skipIntro()"),adData.elements.intro.btn.onHitRollOver(),Gesture.removeEventListener(adData.elements.startBTN,GestureEvent.CLICK,Animation.skipIntro),Gesture.removeEventListener(adData.elements.startBTN,GestureEvent.OVER,adData.elements.intro.btn.onHitRollOver),Gesture.removeEventListener(adData.elements.startBTN,GestureEvent.OUT,adData.elements.intro.btn.onHitRollOut),Gesture.addEventListener(adData.elements.exitBTN,GestureEvent.CLICK,function(){adData.networkExit(clickTag)}),Gesture.disable(adData.elements.startBTN),adData.autoplay&&adData.elements.intro.hide(),Animation.showQuiz()},this.showQuiz=function(){adData.skipQuiz?(adData.elements.quiz.hide(),Animation.showResults()):(adData.elements.quiz.show(),Gesture.addEventListener(adData.elements.exitBTN,GestureEvent.OVER,adData.elements.quiz.quizCTA.onHitRollOver),Gesture.addEventListener(adData.elements.exitBTN,GestureEvent.OUT,adData.elements.quiz.quizCTA.onHitRollOut))},this.showResults=function(){trace("Animation.showResults()"),adData.elements.results.show()},this.hideQuiz=function(){Gesture.removeEventListener(adData.elements.exitBTN,GestureEvent.OVER,adData.elements.quiz.quizCTA.onHitRollOver),Gesture.removeEventListener(adData.elements.exitBTN,GestureEvent.OUT,adData.elements.quiz.quizCTA.onHitRollOut),adData.elements.quiz.hide()},this.showEndframe=function(){adData.elements.endframe.show(),Gesture.addEventListener(adData.elements.exitBTN,GestureEvent.OVER,adData.elements.endframe.endframeCTA.onHitRollOver),Gesture.addEventListener(adData.elements.exitBTN,GestureEvent.OUT,adData.elements.endframe.endframeCTA.onHitRollOut)}};